"use strict";(self.webpackChunkFunkoStore=self.webpackChunkFunkoStore||[]).push([[182],{9518:(R,b,d)=>{d.d(b,{d:()=>g});var P=d(467),c=d(540),e=d(3446),C=d(177),F=d(3867);const S=function(){return{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!0}};function v(k,l){if(1&k&&(c.j41(0,"li",6)(1,"a",7)(2,"picture",8)(3,"span",9),c.EFF(4,"NUEVO"),c.k0s(),c.nrm(5,"img",10)(6,"img",11),c.k0s(),c.j41(7,"div",12)(8,"h3",13),c.EFF(9),c.k0s(),c.j41(10,"p",14),c.EFF(11),c.k0s(),c.j41(12,"p",15),c.EFF(13),c.k0s(),c.j41(14,"p",16),c.EFF(15),c.k0s()()()()),2&k){const u=l.$implicit;c.R7$(1),c.Y8G("routerLink","/shop/"+u.id),c.R7$(4),c.Y8G("src",u.front_image,c.B4B),c.R7$(1),c.Y8G("src",u.back_image,c.B4B),c.R7$(3),c.JRh(u.name),c.R7$(2),c.JRh(u.serie),c.R7$(2),c.JRh(u.licence),c.R7$(2),c.SpI("$",u.price.toLocaleString("es",c.lJ4(7,S)),"")}}let g=(()=>{class k{constructor(u){this.funkoService=u,this.lista=[],this.itemsPerPage=4,this.currentPage=0,this.pages=[]}ngOnInit(){this.mostrarFunkos(),window.addEventListener("resize",()=>{this.updateItemsPerPage()})}mostrarFunkos(){var u=this;return(0,P.A)(function*(){const p=yield u.funkoService.getFunkos();null!=p?(u.lista=p,u.filtroLista&&(u.lista=u.lista.filter(_=>_.licence===u.filtroLista)),u.calculateTotalPages()):console.log("Error al mostrar los funkos")})()}calculateTotalPages(){this.pages=Array(Math.ceil(this.lista.length/this.itemsPerPage)).fill(0).map((u,p)=>p)}get pagedItems(){const u=this.currentPage*this.itemsPerPage;return this.lista.slice(u,u+this.itemsPerPage)}changePage(u){return this.currentPage=u<0?0:u>=this.pages.length?this.pages.length-1:u,!1}updateItemsPerPage(){this.itemsPerPage=window.innerWidth<=1200&&window.innerWidth>992?3:window.innerWidth<=992&&window.innerWidth>576?2:window.innerWidth<=576?1:4}static{this.\u0275fac=function(p){return new(p||k)(c.rXU(e.I))}}static{this.\u0275cmp=c.VBU({type:k,selectors:[["app-slider"]],inputs:{title:"title",filtroLista:"filtroLista"},decls:10,vars:2,consts:[[1,"main","slider-container"],[1,"h2","slider-title"],[1,"slider-items"],["class","slider-item",4,"ngFor","ngForOf"],[1,"slider-nav"],[1,"button",3,"click"],[1,"slider-item"],[3,"routerLink"],[1,"item-cover"],[1,"item-tag"],["alt","Figura coleccionable Funko",1,"item-img-front",3,"src"],["alt","Figura coleccionable Funko en caja",1,"item-img-back",3,"src"],[1,"item-info"],[1,"item-name"],[1,"item-serie"],[1,"item-license"],[1,"item-price"]],template:function(p,_){1&p&&(c.j41(0,"section",0)(1,"h2",1),c.EFF(2),c.k0s(),c.j41(3,"ul",2),c.DNE(4,v,16,8,"li",3),c.k0s(),c.j41(5,"div",4)(6,"button",5),c.bIt("click",function(){return _.changePage(_.currentPage-1)}),c.EFF(7,"ANTERIOR"),c.k0s(),c.j41(8,"button",5),c.bIt("click",function(){return _.changePage(_.currentPage+1)}),c.EFF(9,"SIGUIENTE"),c.k0s()()()),2&p&&(c.R7$(2),c.JRh(_.title),c.R7$(2),c.Y8G("ngForOf",_.pagedItems))},dependencies:[C.Sq,F.Wk],styles:[".slider-container[_ngcontent-%COMP%]{gap:3rem}.slider-title[_ngcontent-%COMP%]{text-transform:uppercase}.slider-items[_ngcontent-%COMP%]{display:flex;gap:3rem;margin:0 auto}.slider-item[_ngcontent-%COMP%]{width:100%}.slider-nav[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:2rem;margin:1rem 0}@media screen and (min-width: 576px){.slider-nav[_ngcontent-%COMP%]{gap:5rem}}"]})}}return k})()},8182:(R,b,d)=>{d.r(b),d.d(b,{ShopModule:()=>_e});var P=d(177),c=d(3867),e=d(540),C=d(8032),F=d(1765),S=d(1569),v=d(3446),g=d(4341);let k=(()=>{class r{constructor(t,n){this.orderService=t,this.funkoService=n,this.searchQuery="",this.orderType="az",this.minPrice=0,this.maxPrice=0}ngOnInit(){this.destildarCheckbox("category"),this.destildarCheckbox("saga")}ngOnDestroy(){this.clearFilters()}onOrderChange(){this.orderService.setOrderType(this.orderType),this.funkoService.aplicarFiltro("order",this.orderType,0,0)}onSearchChange(t){this.orderService.setSearchQuery(t),0==t.length&&(this.funkoService.undoFilters(),this.funkoService.limpiarFiltro("name"))}onCategoryChange(t,n){t.target.checked?this.orderService.setCategoryQuery(n):(this.orderService.setCategoryQuery(""),this.funkoService.undoFilters(),this.funkoService.limpiarFiltro("category"))}onLicenceChange(t,n){t.target.checked?this.orderService.setLicenceQuery(n):(this.orderService.setLicenceQuery(""),this.funkoService.undoFilters(),this.funkoService.limpiarFiltro("licence"))}onPriceFilterChange(){if(this.minPrice<0||this.maxPrice<0)return alert("El precio no puede ser negativo"),this.minPrice=0,void(this.maxPrice=0);this.maxPrice>=0&&this.maxPrice>=this.minPrice&&(this.orderService.setMinPrice(this.minPrice),this.orderService.setMaxPrice(this.maxPrice),this.funkoService.aplicarFiltro("price","",this.minPrice,this.maxPrice))}clearMinPricePlaceholder(){0===this.minPrice&&(this.minPrice=NaN)}clearMaxPricePlaceholder(){0===this.maxPrice&&(this.maxPrice=NaN)}resetMinPricePlaceholder(){isNaN(this.minPrice)&&(this.minPrice=0)}resetMaxPricePlaceholder(){isNaN(this.maxPrice)&&(this.maxPrice=0)}clearFilters(){this.searchQuery="",this.orderType="az",this.minPrice=0,this.maxPrice=0,this.orderService.setSearchQuery(""),this.orderService.setOrderType("az"),this.orderService.setCategoryQuery(""),this.orderService.setLicenceQuery(""),this.orderService.setMinPrice(0),this.orderService.setMaxPrice(0),this.funkoService.showAllFunkos(),this.funkoService.clearAllFilters(),this.limpiarCheckboxes("category"),this.limpiarCheckboxes("saga")}limpiarCheckboxes(t){document.querySelectorAll('input[type="checkbox"][name="'+t+'"]').forEach(i=>{i.checked=!1,i.disabled=!1})}destildarCheckbox(t){const n=document.querySelectorAll('input[type="checkbox"][name="'+t+'"]');n.forEach(i=>{i.addEventListener("change",a=>{i.checked&&n.forEach(s=>{s!==i&&(s.checked=!1)})})})}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(S.w),e.rXU(v.I))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-shop-aside"]],decls:75,vars:4,consts:[[1,"shop-aside"],[1,"shop-aside-box"],["for","search",1,"shop-aside-label"],["id","search","type","text","name","searchQuery","placeholder","Nombre",1,"shop-aside-input",3,"ngModel","ngModelChange"],["for","order",1,"shop-aside-label"],["id","order","name","orderType",1,"shop-aside-input",3,"ngModel","ngModelChange","change"],["value","az"],["value","za"],["value","desc"],["value","asc"],[1,"shop-aside-label"],[1,"shop-aside-price"],["for","min-price",1,"shop-aside-label-small"],["id","min-price","type","number",1,"shop-aside-input",3,"ngModel","ngModelChange","focus","blur","input"],["for","max-price",1,"shop-aside-label-small"],["id","max-price","type","number",1,"shop-aside-input",3,"ngModel","ngModelChange","focus","blur","input"],[1,"shop-aside-label-small"],[1,"shop-aside-checkbox"],["id","minis","name","category","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","minis",1,"shop-aside-label-small"],["id","keychain","name","category","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","keychain",1,"shop-aside-label-small"],["id","plushies","name","category","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","plushies",1,"shop-aside-label-small"],["id","pop-vinyl","name","category","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","pop-vinyl",1,"shop-aside-label-small"],["id","favorites","name","category","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","favorites",1,"shop-aside-label-small"],["id","lotr","name","saga","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","lotr",1,"shop-aside-label-small"],["id","harry-potter","name","saga","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","harry-potter",1,"shop-aside-label-small"],["id","star-wars","name","saga","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","star-wars",1,"shop-aside-label-small"],["id","pokemon","name","saga","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","pokemon",1,"shop-aside-label-small"],[1,"button",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"aside",0)(1,"div",1)(2,"label",2),e.EFF(3,"BUSCAR"),e.k0s(),e.j41(4,"input",3),e.bIt("ngModelChange",function(o){return i.searchQuery=o})("ngModelChange",function(o){return i.onSearchChange(o)}),e.k0s()(),e.j41(5,"div",1)(6,"label",4),e.EFF(7,"ORDENAR POR"),e.k0s(),e.j41(8,"select",5),e.bIt("ngModelChange",function(o){return i.orderType=o})("change",function(){return i.onOrderChange()}),e.j41(9,"option",6),e.EFF(10,"A-Z"),e.k0s(),e.j41(11,"option",7),e.EFF(12,"Z-A"),e.k0s(),e.j41(13,"option",8),e.EFF(14,"Mayor precio"),e.k0s(),e.j41(15,"option",9),e.EFF(16,"Menor precio"),e.k0s()()(),e.j41(17,"div",1)(18,"label",10),e.EFF(19,"PRECIO"),e.k0s(),e.j41(20,"div",11)(21,"div",1)(22,"label",12),e.EFF(23,"Min"),e.k0s(),e.j41(24,"input",13),e.bIt("ngModelChange",function(o){return i.minPrice=o})("focus",function(){return i.clearMinPricePlaceholder()})("blur",function(){return i.resetMinPricePlaceholder()})("input",function(){return i.onPriceFilterChange()}),e.k0s()(),e.j41(25,"div",1)(26,"label",14),e.EFF(27,"Max"),e.k0s(),e.j41(28,"input",15),e.bIt("ngModelChange",function(o){return i.maxPrice=o})("focus",function(){return i.clearMaxPricePlaceholder()})("blur",function(){return i.resetMaxPricePlaceholder()})("input",function(){return i.onPriceFilterChange()}),e.k0s()()()(),e.j41(29,"div",1)(30,"h2",10),e.EFF(31,"FILTRAR"),e.k0s(),e.j41(32,"h3",16),e.EFF(33,"Por categor\xeda"),e.k0s(),e.j41(34,"div",17)(35,"input",18),e.bIt("click",function(o){return i.onCategoryChange(o,"Minis")}),e.k0s(),e.j41(36,"label",19),e.EFF(37,"Minis"),e.k0s()(),e.j41(38,"div",17)(39,"input",20),e.bIt("click",function(o){return i.onCategoryChange(o,"Keychain")}),e.k0s(),e.j41(40,"label",21),e.EFF(41,"Keychain"),e.k0s()(),e.j41(42,"div",17)(43,"input",22),e.bIt("click",function(o){return i.onCategoryChange(o,"Plushies")}),e.k0s(),e.j41(44,"label",23),e.EFF(45,"Plushies"),e.k0s()(),e.j41(46,"div",17)(47,"input",24),e.bIt("click",function(o){return i.onCategoryChange(o,"Pop! Vinyl")}),e.k0s(),e.j41(48,"label",25),e.EFF(49,"Pop! Vinyl"),e.k0s()(),e.j41(50,"div",17)(51,"input",26),e.bIt("click",function(o){return i.onCategoryChange(o,"Favorites")}),e.k0s(),e.j41(52,"label",27),e.EFF(53,"Favoritos"),e.k0s()()(),e.j41(54,"div",1)(55,"h3",16),e.EFF(56,"Por saga"),e.k0s(),e.j41(57,"div",17)(58,"input",28),e.bIt("click",function(o){return i.onLicenceChange(o,"The Lord of the Rings")}),e.k0s(),e.j41(59,"label",29),e.EFF(60,"Lord of the Rings"),e.k0s()(),e.j41(61,"div",17)(62,"input",30),e.bIt("click",function(o){return i.onLicenceChange(o,"Harry Potter")}),e.k0s(),e.j41(63,"label",31),e.EFF(64,"Harry Potter"),e.k0s()(),e.j41(65,"div",17)(66,"input",32),e.bIt("click",function(o){return i.onLicenceChange(o,"Star Wars")}),e.k0s(),e.j41(67,"label",33),e.EFF(68,"Star Wars"),e.k0s()(),e.j41(69,"div",17)(70,"input",34),e.bIt("click",function(o){return i.onLicenceChange(o,"Pokemon")}),e.k0s(),e.j41(71,"label",35),e.EFF(72,"Pokemon"),e.k0s()()(),e.j41(73,"button",36),e.bIt("click",function(){return i.clearFilters()}),e.EFF(74,"LIMPIAR FILTROS"),e.k0s()()),2&n&&(e.R7$(4),e.Y8G("ngModel",i.searchQuery),e.R7$(4),e.Y8G("ngModel",i.orderType),e.R7$(16),e.Y8G("ngModel",i.minPrice),e.R7$(4),e.Y8G("ngModel",i.maxPrice))},dependencies:[g.xH,g.y7,g.me,g.Q0,g.wz,g.BC,g.vS],styles:[".shop-aside[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;gap:4rem;margin:3rem auto}@media screen and (min-width: 576px){.shop-aside[_ngcontent-%COMP%]{margin:6rem 2rem}}@media screen and (min-width: 996px){.shop-aside[_ngcontent-%COMP%]{margin:6rem 4rem}}.shop-aside-box[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:flex-start;gap:1rem}.shop-aside-label[_ngcontent-%COMP%]{font-size:var(--font-xsmall);font-weight:600}@media screen and (min-width: 768px){.shop-aside-label[_ngcontent-%COMP%]{font-size:var(--font-small)}}.shop-aside-input[_ngcontent-%COMP%]{width:100%;font-size:var(--font-xsmall);padding:1rem .5rem;border:.2rem solid var(--dark-font);border-radius:.5rem}@media screen and (min-width: 768px){.shop-aside-input[_ngcontent-%COMP%]{font-size:var(--font-small)}}.shop-aside-input[_ngcontent-%COMP%]:focus{outline:0;border:.2rem solid var(--primary)}.shop-aside-price[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}@media screen and (min-width: 576px){.shop-aside-price[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start}}.shop-aside-label-small[_ngcontent-%COMP%]{font-size:var(--font-xsmall);font-weight:500;letter-spacing:.1rem}@media screen and (min-width: 768px){.shop-aside-label-small[_ngcontent-%COMP%]{font-size:var(--font-small)}}.shop-aside-checkbox[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.shop-aside-checkbox-input[_ngcontent-%COMP%]{width:1rem;height:1rem}@media screen and (min-width: 768px){.shop-aside-checkbox-input[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}}"]})}}return r})();var l=d(467);const u=function(){return{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!0}};function p(r,m){if(1&r&&(e.j41(0,"li")(1,"article",4)(2,"a",5)(3,"picture",6)(4,"span",7),e.EFF(5,"NUEVO"),e.k0s(),e.nrm(6,"img",8)(7,"img",9),e.k0s(),e.j41(8,"div",10)(9,"p",11),e.EFF(10),e.k0s(),e.j41(11,"p",12),e.EFF(12),e.k0s(),e.j41(13,"p",13),e.EFF(14),e.k0s(),e.j41(15,"p",14),e.EFF(16),e.k0s()()()()()),2&r){const t=m.$implicit;e.R7$(2),e.Y8G("routerLink","/shop/"+t.id),e.R7$(4),e.Y8G("src",t.front_image,e.B4B),e.R7$(1),e.Y8G("src",t.back_image,e.B4B),e.R7$(3),e.JRh(t.name),e.R7$(2),e.JRh(t.serie),e.R7$(2),e.JRh(t.licence),e.R7$(2),e.SpI("$",t.price.toLocaleString("es",e.lJ4(7,u)),"")}}function _(r,m){if(1&r){const t=e.RV6();e.j41(0,"li",20),e.bIt("click",function(){const a=e.eBV(t).index,o=e.XpG(2);return e.Njj(o.changePage(a))}),e.EFF(1),e.k0s()}if(2&r){const t=m.index,n=e.XpG(2);e.AVh("active",t===n.currentPage),e.R7$(1),e.SpI("",t+1," ")}}function M(r,m){if(1&r){const t=e.RV6();e.j41(0,"div",15)(1,"ul",16)(2,"li",17),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.changePage(i.currentPage-1))}),e.EFF(3," \xab "),e.k0s(),e.DNE(4,_,2,3,"li",18),e.j41(5,"li",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.changePage(i.currentPage+1))}),e.EFF(6," \xbb "),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.AVh("disabled",0===t.currentPage),e.R7$(2),e.Y8G("ngForOf",t.pages),e.R7$(1),e.AVh("disabled",t.currentPage===t.pages.length-1)}}let A=(()=>{class r{constructor(t,n,i){this.funkoService=t,this.orderService=n,this.activatedRoute=i,this.lista=[],this.itemsPerPage=9,this.currentPage=0,this.pages=[],this.showPagination=!0,this.minPrice=0,this.maxPrice=0}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{const n=t.get("licence");null!=n?(this.orderService.setLicenceQuery(n||""),this.funkoService.aplicarFiltro("licence",n||"",0,0),this.currentPage=0,this.calculateTotalPages()):this.mostrarFunkos()}),this.filteredFunkos$=this.funkoService.getFilteredFunkosObservable(),window.addEventListener("resize",()=>{this.updateItemsPerPage()}),this.orderService.orderType$.subscribe(t=>{("az"===t||"za"===t)&&(this.funkoService.aplicarFiltro("order",t,0,0),this.currentPage=0,this.calculateTotalPages())}),this.orderService.searchQuery$.subscribe(t=>{0!==t.length?(this.funkoService.aplicarFiltro("name",t,0,0),this.currentPage=0,this.calculateTotalPages()):(this.funkoService.limpiarFiltro("name"),this.lista=this.funkoService.mostrarListaFiltrada())}),this.funkoService.getFilteredFunkosObservable().subscribe(t=>{this.lista=t,this.currentPage=0,this.calculateTotalPages(),this.updatePaginationVisibility()}),this.orderService.minPriceSubject.subscribe(t=>{0!==t&&(this.minPrice=t,this.funkoService.aplicarFiltro("price","",t,this.maxPrice),this.currentPage=0,this.calculateTotalPages())}),this.orderService.maxPriceSubject.subscribe(t=>{0!==t&&(this.maxPrice=t,this.funkoService.aplicarFiltro("price","",this.minPrice,this.maxPrice),this.currentPage=0,this.calculateTotalPages())}),this.orderService.categoryQuery$.subscribe(t=>{0!==t.length?(this.funkoService.aplicarFiltro("category",t,0,0),this.currentPage=0,this.calculateTotalPages()):(this.funkoService.limpiarFiltro("category"),this.lista=this.funkoService.mostrarListaFiltrada())}),this.orderService.licenceQuery$?.subscribe(t=>{0!==t.length?(this.funkoService.aplicarFiltro("licence",t,0,0),this.currentPage=0,this.calculateTotalPages()):(this.funkoService.limpiarFiltro("licence"),this.lista=this.funkoService.mostrarListaFiltrada())})}mostrarFunkos(){var t=this;return(0,l.A)(function*(){const n=yield t.funkoService.getFunkos();null!=n?(t.lista=n,t.lista.sort((i,a)=>i.name.localeCompare(a.name)),t.calculateTotalPages()):console.log("Error al mostrar los funkos")})()}calculateTotalPages(){this.pages=Array(Math.ceil(this.lista.length/this.itemsPerPage)).fill(0).map((t,n)=>n)}get paginatedItems(){const t=this.currentPage*this.itemsPerPage;return this.lista.slice(t,t+this.itemsPerPage)}changePage(t){return this.currentPage=t<0?0:t>=this.pages.length?this.pages.length-1:t,window.scrollTo(0,0),!1}updateItemsPerPage(){this.itemsPerPage=window.innerWidth<=1200&&window.innerWidth>=992?8:window.innerWidth<992&&window.innerWidth>=768?6:window.innerWidth<768?4:9}updatePaginationVisibility(){this.showPagination=void 0!==this.filteredFunkos$&&0!==this.lista.length}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(v.I),e.rXU(S.w),e.rXU(c.nX))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-shop-main"]],decls:4,vars:2,consts:[[1,"shop-main"],[1,"shop-main-items"],[4,"ngFor","ngForOf"],["class","pagination",4,"ngIf"],[1,"shop-main-item"],[3,"routerLink"],[1,"item-cover"],[1,"item-tag"],["alt","Figura coleccionable Funko",1,"item-img-front",3,"src"],["alt","Figura coleccionable Funko",1,"item-img-back",3,"src"],[1,"item-info"],[1,"item-name"],[1,"item-serie"],[1,"item-license"],[1,"item-price"],[1,"pagination"],[1,"pagination-list"],["id","pagination-previous-page",3,"click"],["class","pagination-page-link",3,"active","click",4,"ngFor","ngForOf"],["id","pagination-next-page",3,"click"],[1,"pagination-page-link",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"main",0)(1,"ul",1),e.DNE(2,p,17,8,"li",2),e.k0s(),e.DNE(3,M,7,5,"div",3),e.k0s()),2&n&&(e.R7$(2),e.Y8G("ngForOf",i.paginatedItems),e.R7$(1),e.Y8G("ngIf",i.showPagination))},dependencies:[P.Sq,P.bT,c.Wk],styles:[".shop-main[_ngcontent-%COMP%]{margin:3rem auto}@media screen and (min-width: 768px){.shop-main[_ngcontent-%COMP%]{min-width:80vw;margin:6rem 2rem}}@media screen and (min-width: 996px){.shop-main[_ngcontent-%COMP%]{margin:6rem 4rem}}.shop-main-items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:2rem}.shop-main-item[_ngcontent-%COMP%]{width:25rem;margin:0 auto}@media screen and (min-width: 992px){.shop-main-item[_ngcontent-%COMP%]{margin:2rem}}"]})}}return r})(),T=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-shop-page"]],decls:5,vars:0,consts:[[1,"shop-container"]],template:function(n,i){1&n&&(e.nrm(0,"app-header"),e.j41(1,"div",0),e.nrm(2,"app-shop-aside")(3,"app-shop-main"),e.k0s(),e.nrm(4,"app-footer"))},dependencies:[C.l,F.n,k,A],styles:[".shop-container[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center}@media screen and (min-width: 576px){.shop-container[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start}}"]})}}return r})();var $=d(9518),x=d(4412),y=d(3943),f=d(1016),E=d(3067);let w=(()=>{class r{constructor(t){var n=this;this.loginService=t,this.cart=[],this.cartId=void 0,this.cartSubject=new x.t(this.cart),this.url=y.d.urlCartData,this.loginService.authStateObservable()?.subscribe(function(){var i=(0,l.A)(function*(a){if(a){n.userId=a.id;const o=yield n.obtenerCartPorUserId(n.userId);n.cartId=o.id;const s=yield f.A.get(`${n.url}/items/${n.userId}`);n.cart=s.data,n.cartSubject.next(n.cart)}});return function(a){return i.apply(this,arguments)}}()),this.cartSubject.subscribe(i=>{this.cart=i})}obtenerCartPorUserId(t){var n=this;return(0,l.A)(function*(){try{return(yield f.A.get(`${n.url}/${t}`)).data}catch(i){throw console.log(i),i}})()}obtenerCarts(){var t=this;return(0,l.A)(function*(){try{return(yield f.A.get(`${t.url}`)).data}catch(n){throw console.log(n),n}})()}obtenerCarritoDeCompras(t){var n=this;return(0,l.A)(function*(){try{const i=yield f.A.get(`${n.url}/items/${n.userId}`);if(i){const a=i.data;return n.cart=a,n.cartSubject.next(n.cart),a}return[]}catch(i){throw console.log(i),i}})()}agregarAlCarrito(t,n){var i=this;return(0,l.A)(function*(){try{if(!i.cart.find(a=>a.id_funko===t)){const a=yield i.obtenerCarts(),o=yield i.obtenerCartPorUserId(i.userId),s=a.length,I=(yield f.A.post(`${i.url}/items/${i.userId}`,{id:s+1,id_cart:o.id,id_funko:t,quantity:n})).data;return i.cart.push(I),i.cartSubject.next(i.cart),I}}catch(a){throw console.log(a),a}})()}actualizarCantidades(t,n,i,a){var o=this;return(0,l.A)(function*(){try{return yield f.A.put(`${o.url}/items/${t}`,{id_funko:i,cantidad:a}),o.cart=yield o.obtenerCarritoDeCompras(t),o.cartSubject.next(o.cart),o.cart}catch(s){throw console.log(s),s}})()}eliminarDelCarrito(t,n){var i=this;return(0,l.A)(function*(){try{return yield f.A.delete(`${i.url}/items/${n}`,{data:{id_funko:t}}),i.cart=i.cart.filter(o=>o.id_funko!==t),i.cartSubject.next(i.cart),i.cart}catch(a){throw console.log(a),a}})()}static{this.\u0275fac=function(n){return new(n||r)(e.KVO(E.H))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),D=(()=>{class r{constructor(){this.url=y.d.urlAPITolkien,this.token=y.d.tokenAPITolkien}getCharacterInfo(t){var n=this;return(0,l.A)(function*(){try{const i=`^${t}`;return(yield f.A.get(`${n.url}/character?name=/${i}/i`,{headers:{Authorization:`Bearer ${n.token}`}})).data}catch(i){alert("Error en la solicitud"+i)}})()}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),j=(()=>{class r{constructor(){this.dbName="cartDB",this.dbVersion=1,this.cartStoreName="cartItems",this.db=null,this.cart=[],this.cartSubject=new x.t(this.cart),this.initDatabase(),this.cartSubject.subscribe(t=>{this.cart=t})}initDatabase(){const t=indexedDB.open(this.dbName,this.dbVersion);t.onupgradeneeded=n=>{const i=n.target.result;i.objectStoreNames.contains(this.cartStoreName)||i.createObjectStore(this.cartStoreName,{keyPath:"funkoId"})},t.onsuccess=n=>{this.db=n.target.result,this.getCart()},t.onerror=n=>{console.error("Error opening indexedDB:",n.target.error)}}addToCart(t){var n=this;return(0,l.A)(function*(){if(!n.db)throw new Error("Database not initialized");const a=n.db.transaction(n.cartStoreName,"readwrite").objectStore(n.cartStoreName),o=a.get(t.funkoId),s=yield new Promise((h,I)=>{o.onsuccess=()=>h(o.result),o.onerror=()=>I(o.error)});s?(s.quantity+=t.quantity,yield a.put(s)):yield a.add(t)})()}removeFromCart(t){var n=this;return(0,l.A)(function*(){if(!n.db)return;const a=n.db.transaction(n.cartStoreName,"readwrite").objectStore(n.cartStoreName);try{yield a.delete(t),yield n.getCart()}catch(o){console.error("Error removing item from cart:",o)}})()}getCart(){var t=this;return(0,l.A)(function*(){if(!t.db)return[];const a=t.db.transaction(t.cartStoreName,"readonly").objectStore(t.cartStoreName).getAll();return new Promise((o,s)=>{a.onsuccess=()=>{o(a.result),t.cart=a.result,t.cartSubject.next(t.cart)},a.onerror=()=>s(a.error)})})()}getCartItemFromDatabase(t){var n=this;return(0,l.A)(function*(){if(!n.db)return;const o=n.db.transaction(n.cartStoreName,"readonly").objectStore(n.cartStoreName).get(t);return new Promise((s,h)=>{o.onsuccess=()=>s(o.result),o.onerror=()=>h(o.error)})})()}updateCartItem(t){var n=this;return(0,l.A)(function*(){if(!n.db)throw new Error("Database not initialized");const a=n.db.transaction(n.cartStoreName,"readwrite").objectStore(n.cartStoreName),o=a.get(t.funkoId),s=yield new Promise((h,I)=>{o.onsuccess=()=>h(o.result),o.onerror=()=>I(o.error)});s&&(s.quantity=t.quantity,yield a.put(s))})()}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),N=(()=>{class r{constructor(){this.url=y.d.urlAPIPotter}getCharacterInfo(t){var n=this;return(0,l.A)(function*(){try{const o=(yield(0,f.A)(`${n.url}/api/characters`)).data.filter(s=>s.name===t);return 0===o.length?void 0:o[0]}catch(i){return void alert("Error en la solicitud"+i)}})()}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),L=(()=>{class r{constructor(){this.url=y.d.urlAPIStarWars}getCharacterInfo(t){var n=this;return(0,l.A)(function*(){try{const a=(yield(0,f.A)(`${n.url}/characters/name/${t}`)).data;return void 0===a?void 0:a[0]}catch(i){alert("Error en la solicitud"+i)}})()}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),B=(()=>{class r{constructor(){this.url=y.d.urlPokemonJson}getPokemon(t){var n=this;return(0,l.A)(function*(){try{return(yield f.A.get(`${n.url}/pokemon/${t}`)).data}catch(i){console.log(i)}})()}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();const G=["addButton"],U=["subtractButton"],z=["quantityButton"];function X(r,m){if(1&r&&(e.qex(0),e.j41(1,"a",29),e.EFF(2),e.k0s(),e.bVm()),2&r){const t=e.XpG(3);e.R7$(1),e.FS9("href",null==t.characterInfo?null:t.characterInfo.wikiUrl,e.B4B),e.R7$(1),e.JRh(null==t.characterInfo?null:t.characterInfo.wikiUrl)}}function V(r,m){1&r&&(e.qex(0),e.EFF(1,"desconocido"),e.bVm())}function q(r,m){if(1&r&&(e.qex(0),e.j41(1,"p"),e.EFF(2),e.k0s(),e.j41(3,"p"),e.EFF(4),e.k0s(),e.j41(5,"p"),e.EFF(6,"Link Wiki: "),e.DNE(7,X,3,2,"ng-container",28),e.DNE(8,V,2,0,"ng-container",28),e.k0s(),e.j41(9,"p"),e.EFF(10),e.k0s(),e.j41(11,"p"),e.EFF(12),e.k0s(),e.bVm()),2&r){const t=e.XpG(2);e.R7$(2),e.SpI("Raza: ",null!=t.characterInfo&&t.characterInfo.race?null==t.characterInfo?null:t.characterInfo.race:"desconocido",""),e.R7$(2),e.SpI("Compa\xf1ero/a: ",null!=t.characterInfo&&t.characterInfo.spouse?null==t.characterInfo?null:t.characterInfo.spouse:"desconocido",""),e.R7$(3),e.Y8G("ngIf",null==t.characterInfo?null:t.characterInfo.wikiUrl),e.R7$(1),e.Y8G("ngIf",!(null!=t.characterInfo&&t.characterInfo.wikiUrl)),e.R7$(2),e.SpI("Nacimiento: ",null!=t.characterInfo&&t.characterInfo.birth?null==t.characterInfo?null:t.characterInfo.birth:"desconocido",""),e.R7$(2),e.SpI("Muerte: ",null!=t.characterInfo&&t.characterInfo.death?null==t.characterInfo?null:t.characterInfo.death:"desconocido","")}}function Q(r,m){1&r&&e.nrm(0,"img",30)}function W(r,m){if(1&r&&(e.j41(0,"section",24)(1,"h4",25),e.EFF(2,"INFORMACI\xd3N ADICIONAL"),e.k0s(),e.DNE(3,q,13,6,"ng-container",26),e.DNE(4,Q,1,0,"ng-template",null,27,e.C5r),e.k0s()),2&r){const t=e.sdS(5),n=e.XpG();e.R7$(3),e.Y8G("ngIf",n.dataLoaded)("ngIfElse",t)}}function Y(r,m){if(1&r&&e.nrm(0,"img",33),2&r){const t=e.XpG(3);e.FS9("src",null==t.characterInfoPotter?null:t.characterInfoPotter.image,e.B4B)}}function J(r,m){if(1&r&&(e.qex(0),e.j41(1,"div")(2,"p"),e.EFF(3),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s(),e.j41(6,"p"),e.EFF(7),e.k0s(),e.j41(8,"p"),e.EFF(9),e.k0s(),e.j41(10,"p"),e.EFF(11),e.k0s(),e.j41(12,"p"),e.EFF(13),e.k0s(),e.j41(14,"p"),e.EFF(15),e.k0s()(),e.DNE(16,Y,1,1,"img",32),e.bVm()),2&r){const t=e.XpG(2);e.R7$(3),e.SpI("Especie: ",null!=t.characterInfoPotter&&t.characterInfoPotter.species?null==t.characterInfoPotter?null:t.characterInfoPotter.species:"desconocido",""),e.R7$(2),e.SpI("Casa: ",null!=t.characterInfoPotter&&t.characterInfoPotter.house?null==t.characterInfoPotter?null:t.characterInfoPotter.house:"desconocido",""),e.R7$(2),e.SpI("Nacimiento: ",null!=t.characterInfoPotter&&t.characterInfoPotter.dateOfBirth?null==t.characterInfoPotter?null:t.characterInfoPotter.dateOfBirth:"desconocido"," "),e.R7$(2),e.SpI("Ancestros: ",null!=t.characterInfoPotter&&t.characterInfoPotter.ancestry?null==t.characterInfoPotter?null:t.characterInfoPotter.ancestry:"desconocido",""),e.R7$(2),e.SpI("Patrono: ",null!=t.characterInfoPotter&&t.characterInfoPotter.patronus?null==t.characterInfoPotter?null:t.characterInfoPotter.patronus:"desconocido",""),e.R7$(2),e.SpI("Madera de Varita: ",null!=t.characterInfoPotter&&null!=t.characterInfoPotter.wand&&t.characterInfoPotter.wand.wood?null==t.characterInfoPotter||null==t.characterInfoPotter.wand?null:t.characterInfoPotter.wand.wood:"desconocido",""),e.R7$(2),e.SpI("N\xfacleo de Varita: ",null!=t.characterInfoPotter&&null!=t.characterInfoPotter.wand&&t.characterInfoPotter.wand.core?null==t.characterInfoPotter||null==t.characterInfoPotter.wand?null:t.characterInfoPotter.wand.core:"desconocido",""),e.R7$(1),e.Y8G("ngIf",null!=(null==t.characterInfoPotter?null:t.characterInfoPotter.image)&&""!=(null==t.characterInfoPotter?null:t.characterInfoPotter.image))}}function H(r,m){1&r&&e.nrm(0,"img",34)}function K(r,m){if(1&r&&(e.j41(0,"section",31)(1,"h4",25),e.EFF(2,"INFORMACI\xd3N ADICIONAL"),e.k0s(),e.DNE(3,J,17,8,"ng-container",26),e.DNE(4,H,1,0,"ng-template",null,27,e.C5r),e.k0s()),2&r){const t=e.sdS(5),n=e.XpG();e.R7$(3),e.Y8G("ngIf",n.dataLoaded)("ngIfElse",t)}}function Z(r,m){if(1&r&&e.nrm(0,"img",33),2&r){const t=e.XpG(3);e.FS9("src",null==t.characterInfoStarWars?null:t.characterInfoStarWars.image,e.B4B)}}function ee(r,m){if(1&r&&(e.qex(0),e.j41(1,"p"),e.EFF(2),e.k0s(),e.j41(3,"p"),e.EFF(4),e.k0s(),e.DNE(5,Z,1,1,"img",32),e.bVm()),2&r){const t=e.XpG(2);e.R7$(2),e.SpI("Nombre: ",null!=t.characterInfoStarWars&&t.characterInfoStarWars.name?null==t.characterInfoStarWars?null:t.characterInfoStarWars.name:"desconocido",""),e.R7$(2),e.SpI("Descripci\xf3n: ",null!=t.characterInfoStarWars&&t.characterInfoStarWars.description?null==t.characterInfoStarWars?null:t.characterInfoStarWars.description:"desconocido",""),e.R7$(1),e.Y8G("ngIf",null!=(null==t.characterInfoStarWars?null:t.characterInfoStarWars.image))}}function te(r,m){1&r&&e.nrm(0,"img",34)}function ne(r,m){if(1&r&&(e.j41(0,"section",35)(1,"h4",25),e.EFF(2,"INFORMACI\xd3N ADICIONAL"),e.k0s(),e.DNE(3,ee,6,3,"ng-container",26),e.DNE(4,te,1,0,"ng-template",null,27,e.C5r),e.k0s()),2&r){const t=e.sdS(5),n=e.XpG();e.R7$(3),e.Y8G("ngIf",n.dataLoaded)("ngIfElse",t)}}function ie(r,m){if(1&r&&(e.qex(0),e.j41(1,"p")(2,"strong"),e.EFF(3,"Nombre:"),e.k0s(),e.EFF(4),e.k0s(),e.j41(5,"p")(6,"strong"),e.EFF(7,"Descripci\xf3n:"),e.k0s(),e.EFF(8),e.k0s(),e.j41(9,"p")(10,"strong"),e.EFF(11,"Tipo:"),e.k0s(),e.EFF(12),e.k0s(),e.j41(13,"p")(14,"strong"),e.EFF(15,"Altura:"),e.k0s(),e.EFF(16),e.k0s(),e.j41(17,"p")(18,"strong"),e.EFF(19,"Peso:"),e.k0s(),e.EFF(20),e.k0s(),e.bVm()),2&r){const t=e.XpG(2);e.R7$(4),e.SpI(" ",null!=t.characterInfoPokemon&&t.characterInfoPokemon.name?null==t.characterInfoPokemon?null:t.characterInfoPokemon.name:"desconocido"," "),e.R7$(4),e.SpI(" ",null!=t.characterInfoPokemon&&t.characterInfoPokemon.description?null==t.characterInfoPokemon?null:t.characterInfoPokemon.description:"desconocido"," "),e.R7$(4),e.SpI(" ",null!=t.characterInfoPokemon&&t.characterInfoPokemon.type?null==t.characterInfoPokemon?null:t.characterInfoPokemon.type:"desconocido"," "),e.R7$(4),e.SpI(" ",null!=t.characterInfoPokemon&&t.characterInfoPokemon.height?null==t.characterInfoPokemon?null:t.characterInfoPokemon.height:"desconocido"," "),e.R7$(4),e.SpI(" ",null!=t.characterInfoPokemon&&t.characterInfoPokemon.weight?null==t.characterInfoPokemon?null:t.characterInfoPokemon.weight:"desconocido"," ")}}function re(r,m){1&r&&e.nrm(0,"img",34)}function ae(r,m){if(1&r&&(e.j41(0,"section",36)(1,"h4",25),e.EFF(2,"INFORMACI\xd3N ADICIONAL"),e.k0s(),e.DNE(3,ie,21,5,"ng-container",26),e.DNE(4,re,1,0,"ng-template",null,27,e.C5r),e.k0s()),2&r){const t=e.sdS(5),n=e.XpG();e.R7$(3),e.Y8G("ngIf",n.dataLoaded)("ngIfElse",t)}}const oe=function(){return{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!0}};let ce=(()=>{class r{constructor(t,n,i,a,o,s,h,I,O){this.route=t,this.funkosService=n,this.cartService=i,this.apiTolkienService=a,this.loginService=o,this.cartLocalService=s,this.apiPotterService=h,this.apiStarWarsService=I,this.apiPokemonService=O,this.isAuthenticated=!1,this.stock=0,this.dataLoaded=!1,this.loginService.authStateObservable()?.subscribe(ke=>{this.isAuthenticated=!!ke})}ngOnInit(){this.route.params.subscribe(t=>{this.getItemById(t.id)}),this.funkosService.stockFunkoSubject$.subscribe(t=>{this.stock=t})}ngAfterViewInit(){this.addButton&&this.subtractButton&&this.quantityButton&&(this.addButton.nativeElement.addEventListener("click",()=>this.handleAddClick()),this.subtractButton.nativeElement.addEventListener("click",()=>this.handleSubtractClick()))}handleAddClick(){this.updateQuantity(1)}handleSubtractClick(){this.updateQuantity(-1)}updateQuantity(t){if(this.quantityButton){let n=this.quantityButton.nativeElement.value;""===n||isNaN(n)?n="0":(n=(parseInt(n)+t).toString(),parseInt(n)<0?n="0":this.stock&&parseInt(n)>this.stock&&(n=this.stock)),this.quantityButton.nativeElement.value=n}}getItemById(t){var n=this;return(0,l.A)(function*(){try{if(n.dataLoaded=!1,n.selectedItem=yield n.funkosService.getFunko(t),n.selectedItemLicence=n.selectedItem?.licence,n.stock=n.selectedItem?.stock,n.funkosService.emitirStockInicial(n.selectedItem?.stock||0),n.selectedItem&&n.selectedItem.name)if("The Lord of the Rings"===n.selectedItem.licence){const i=yield n.apiTolkienService.getCharacterInfo(n.selectedItem.name);i&&i.docs&&i.docs.length>0?(n.characterInfo=i.docs[0],n.dataLoaded=!0):0===i.docs.length&&(n.characterInfo=void 0,n.dataLoaded=!0)}else if("Harry Potter"===n.selectedItem.licence){const i=yield n.apiPotterService.getCharacterInfo(n.selectedItem.name);i?(n.characterInfoPotter=i,n.dataLoaded=!0):(n.characterInfoPotter=void 0,n.dataLoaded=!0)}else if("Star Wars"===n.selectedItem.licence){const i=yield n.apiStarWarsService.getCharacterInfo(n.selectedItem.name);i?(n.characterInfoStarWars=i,n.dataLoaded=!0):(n.characterInfoStarWars=void 0,n.dataLoaded=!0)}else if("Pokemon"===n.selectedItem.licence){const i=yield n.apiPokemonService.getPokemon(n.selectedItem.id);i?(n.characterInfoPokemon=i,n.dataLoaded=!0):(n.characterInfoPokemon=void 0,n.dataLoaded=!0)}return n.selectedItem}catch(i){return void console.log(i)}})()}addToCart(){var t=this;return(0,l.A)(function*(){if(t.selectedItem&&t.quantityButton){const n=parseInt(t.quantityButton.nativeElement.value);if(n>0&&t.selectedItem.id){if(t.isAuthenticated)t.selectedItem.stock&&t.selectedItem.stock>0&&t.selectedItem.stock>n?(t.cartService.agregarAlCarrito(t.selectedItem.id,n),t.funkosService.emitirStockInicial(t.stock?t.stock-n:0)):alert("No hay stock suficiente");else if(t.selectedItem.stock&&t.selectedItem.stock>0&&t.selectedItem.stock>=n){yield t.cartLocalService.addToCart({funkoId:t.selectedItem.id,quantity:n});const i=t.stock?t.stock-n:0;t.funkosService.emitirStockInicial(i),t.funkosService.actualizarStockFunko(t.selectedItem.id,i)}t.quantityButton.nativeElement.value="0"}}})()}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(c.nX),e.rXU(v.I),e.rXU(w),e.rXU(D),e.rXU(E.H),e.rXU(j),e.rXU(N),e.rXU(L),e.rXU(B))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-item"]],viewQuery:function(n,i){if(1&n&&(e.GBs(G,5),e.GBs(U,5),e.GBs(z,5)),2&n){let a;e.mGM(a=e.lsd())&&(i.addButton=a.first),e.mGM(a=e.lsd())&&(i.subtractButton=a.first),e.mGM(a=e.lsd())&&(i.quantityButton=a.first)}},decls:32,vars:12,consts:[[1,"main","item-container"],[1,"item"],[1,"item-picture"],[1,"item-img-front",3,"src"],[1,"item-img-back",3,"src"],[1,"item-info"],[1,"item-name"],[1,"item-serie"],[1,"item-license"],[1,"item-price"],[1,"item-cart"],[1,"item-cart-quantity"],["id","subtract",1,"button","item-cart-quantity-btn"],["subtractButton",""],["type","text","id","quantity","value","0","disabled","",1,"item-input"],["quantityButton",""],["id","add",1,"button","item-cart-quantity-btn"],["addButton",""],[1,"item-stock"],[1,"button",3,"click"],["class","item-info-extra",4,"ngIf"],["class","item-info-extra harry-potter-info",4,"ngIf"],["class","item-info-extra star-wars-info",4,"ngIf"],["class","item-info-extra pokemon-info",4,"ngIf"],[1,"item-info-extra"],[1,"item-info-extra-title"],[4,"ngIf","ngIfElse"],["loading",""],[4,"ngIf"],["target","_blank",3,"href"],["src","../../../../assets/img/spinner.svg","alt","Loading spinner",1,"spinner"],[1,"item-info-extra","harry-potter-info"],[3,"src",4,"ngIf"],[3,"src"],["src","../../../../assets/img/spinner.svg","alt","Loading Spinner",1,"spinner"],[1,"item-info-extra","star-wars-info"],[1,"item-info-extra","pokemon-info"]],template:function(n,i){1&n&&(e.j41(0,"main",0)(1,"article",1)(2,"picture",2),e.nrm(3,"img",3)(4,"img",4),e.k0s(),e.j41(5,"section",5)(6,"h3",6),e.EFF(7),e.k0s(),e.j41(8,"p",7),e.EFF(9),e.k0s(),e.j41(10,"p",8),e.EFF(11),e.k0s(),e.j41(12,"p",9),e.EFF(13),e.k0s(),e.j41(14,"div",10)(15,"div",11)(16,"button",12,13),e.EFF(18,"-"),e.k0s(),e.nrm(19,"input",14,15),e.j41(21,"button",16,17),e.EFF(23,"+"),e.k0s(),e.j41(24,"p",18),e.EFF(25),e.k0s()(),e.j41(26,"button",19),e.bIt("click",function(){return i.addToCart()}),e.EFF(27,"AGREGAR"),e.k0s()()(),e.DNE(28,W,6,2,"section",20),e.DNE(29,K,6,2,"section",21),e.DNE(30,ne,6,2,"section",22),e.DNE(31,ae,6,2,"section",23),e.k0s()()),2&n&&(e.R7$(3),e.FS9("src",null==i.selectedItem?null:i.selectedItem.front_image,e.B4B),e.R7$(1),e.FS9("src",null==i.selectedItem?null:i.selectedItem.back_image,e.B4B),e.R7$(3),e.JRh(null==i.selectedItem?null:i.selectedItem.name),e.R7$(2),e.JRh(null==i.selectedItem?null:i.selectedItem.serie),e.R7$(2),e.SpI("",null==i.selectedItem?null:i.selectedItem.licence," "),e.R7$(2),e.SpI("$",null==i.selectedItem||null==i.selectedItem.price?null:i.selectedItem.price.toLocaleString("es",e.lJ4(11,oe)),""),e.R7$(12),e.SpI("Disponibles: ",i.stock,""),e.R7$(3),e.Y8G("ngIf","The Lord of the Rings"==i.selectedItemLicence),e.R7$(1),e.Y8G("ngIf","Harry Potter"==i.selectedItemLicence),e.R7$(1),e.Y8G("ngIf","Star Wars"==i.selectedItemLicence),e.R7$(1),e.Y8G("ngIf","Pokemon"==i.selectedItemLicence))},dependencies:[P.bT],styles:[".item-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:2rem}@media screen and (min-width: 992px){.item-container[_ngcontent-%COMP%]{min-height:60vh;flex-direction:row;margin:6rem}}.item[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:4rem}@media screen and (min-width: 992px){.item[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start}}.item-picture[_ngcontent-%COMP%]{width:100%;display:block}@media screen and (min-width: 992px){.item-picture[_ngcontent-%COMP%]{width:30%;flex-direction:row}}.item-picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:50vh;object-fit:contain;animation:_ngcontent-%COMP%_fade 2s ease-in-out}@keyframes _ngcontent-%COMP%_fade{0%{opacity:0}to{opacity:1}}.item-img-back[_ngcontent-%COMP%], .item-picture[_ngcontent-%COMP%]:hover   .item-img-front[_ngcontent-%COMP%]{display:none}.item-picture[_ngcontent-%COMP%]:hover   .item-img-back[_ngcontent-%COMP%]{display:block}.item-info[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:2rem;position:relative}@media screen and (min-width: 992px){.item-info[_ngcontent-%COMP%]{width:30%;align-items:flex-start}}.item-name[_ngcontent-%COMP%]{font-size:var(--font-large);font-weight:1000;text-align:center}@media screen and (min-width: 768px){.item-name[_ngcontent-%COMP%]{font-size:var(--font-xlarge)}}.item-serie[_ngcontent-%COMP%]{font-size:var(--font-medium);font-weight:500}@media screen and (min-width: 768px){.item-serie[_ngcontent-%COMP%]{font-size:var(--font-large)}}.item-license[_ngcontent-%COMP%]{font-size:var(--font-small);font-weight:500}@media screen and (min-width: 768px){.item-license[_ngcontent-%COMP%]{font-size:var(--font-medium)}}.item-price[_ngcontent-%COMP%]{font-size:var(--font-medium);font-weight:500}@media screen and (min-width: 768px){.item-price[_ngcontent-%COMP%]{font-size:var(--font-large)}}.item-info-extra[_ngcontent-%COMP%]{width:100%;display:flex;padding:2rem;border:.2rem solid var(--primary);border-radius:.5rem;flex-direction:column;word-wrap:break-word;margin:0 auto}@media screen and (min-width: 768px){.item-info-extra[_ngcontent-%COMP%]{width:60%}}@media screen and (min-width: 992px){.item-info-extra[_ngcontent-%COMP%]{width:30%}}.item-info-extra-title[_ngcontent-%COMP%]{font-size:var(--font-medium);font-weight:500;color:var(--primary);text-align:center;margin-bottom:2rem}.item-info-extra[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--font-xsmall);color:var(--dark-font);margin:1rem 0}.item-info-extra[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--secondary);text-decoration:underline}.harry-potter-info[_ngcontent-%COMP%]{position:relative!important;display:flex;align-items:center}.harry-potter-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inline-block;width:10rem;border-radius:1.2rem}.star-wars-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:1.2rem}.star-wars-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .pokemon-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify}"]})}}return r})(),se=(()=>{class r{constructor(t,n){this.funkoService=t,this.activatedRoute=n,this.title="PRODUCTOS RELACIONADOS",this.obtenerIdItem()}obtenerIdItem(){var t=this;this.activatedRoute.paramMap.subscribe(function(){var n=(0,l.A)(function*(i){window.scroll(0,0);let a=i.get("id");const o=yield t.funkoService.getFunko(parseInt(a||""));t.selectedItemLicence=o?.licence});return function(i){return n.apply(this,arguments)}}())}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(v.I),e.rXU(c.nX))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-item-page"]],decls:4,vars:2,consts:[[3,"title","filtroLista"]],template:function(n,i){1&n&&e.nrm(0,"app-header")(1,"app-item")(2,"app-slider",0)(3,"app-footer"),2&n&&(e.R7$(2),e.Y8G("title",i.title)("filtroLista",i.selectedItemLicence))},dependencies:[C.l,F.n,$.d,ce]})}}return r})();var le=d(5651),ue=d.n(le);const de=function(){return{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!0}};function me(r,m){if(1&r){const t=e.RV6();e.j41(0,"li",9)(1,"div",10)(2,"picture",11),e.nrm(3,"img",12),e.k0s(),e.j41(4,"article",13)(5,"p",14),e.EFF(6),e.k0s(),e.j41(7,"p",15),e.EFF(8),e.k0s(),e.j41(9,"p",16),e.EFF(10),e.k0s()()(),e.j41(11,"div",17)(12,"button",18),e.bIt("click",function(){const a=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.decreaseQuantity(a))}),e.EFF(13,"-"),e.k0s(),e.nrm(14,"input",19,20),e.j41(16,"button",21),e.bIt("click",function(){const a=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.increaseQuantity(a))}),e.EFF(17,"+"),e.k0s(),e.j41(18,"p",22),e.EFF(19),e.k0s()(),e.j41(20,"div",23)(21,"p"),e.EFF(22),e.k0s()(),e.j41(23,"div")(24,"img",24),e.bIt("click",function(){const a=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.removeItem(a))}),e.k0s()()()}if(2&r){const t=m.$implicit,n=e.XpG();e.R7$(3),e.FS9("alt",t.name),e.Y8G("src",t.front_image,e.B4B),e.R7$(3),e.JRh(t.name),e.R7$(2),e.JRh(t.serie),e.R7$(2),e.JRh(t.licence),e.R7$(4),e.Y8G("value",t.quantity),e.R7$(5),e.SpI("Disponibles: ",t.stock,""),e.R7$(3),e.SpI("$",n.calculateTotalPrice(t).toLocaleString("es",e.lJ4(8,de)),"")}}let he=(()=>{class r{constructor(t,n,i,a){this.cartService=t,this.funkoService=n,this.loginService=i,this.cartLocalService=a,this.cartItems=[],this.cartItemsCopy=[],this.cartItemsId=[],this.totalQuantity=new x.t(0),this.totalPrice=new x.t(0)}ngOnInit(){var t=this;this.loginService.authStateObservable()?.subscribe(function(){var n=(0,l.A)(function*(i){i?(t.user=t.loginService.authStateObservable(),yield t.obtenerCart(i.id?.toString()??""),t.obtenerTotalPrice(),yield t.loadFunkoDetails()):(t.user=void 0,t.cartItems=[],t.cartItems=yield t.cartLocalService.getCart(),yield t.loadFunkoDetails())});return function(i){return n.apply(this,arguments)}}()),this.cartLocalService.cartSubject.subscribe(function(){var n=(0,l.A)(function*(i){if(null==t.user){t.cartItems=i,yield t.loadFunkoDetails(),t.obtenerTotalPrice();const a=t.cartItems.reduce((o,s)=>o+s.quantity,0);t.totalQuantity.next(a)}});return function(i){return n.apply(this,arguments)}}()),this.cartService.cartSubject.subscribe(function(){var n=(0,l.A)(function*(i){const a=i;t.cartItems=[],a.forEach(s=>{t.cartItems.push({funkoId:s.id_funko,quantity:s.cantidad}),t.cartItemsId.push(s.id_funko)});const o=t.cartItems.reduce((s,h)=>s+h.quantity,0);t.totalQuantity.next(o),t.obtenerTotalPrice()});return function(i){return n.apply(this,arguments)}}())}obtenerCart(t){var n=this;return(0,l.A)(function*(){const i=yield n.cartService.obtenerCarritoDeCompras(parseInt(t));return i&&(n.cart=i[0].id_cart,i.forEach(o=>{n.cartItems.push({funkoId:o.id_funko,quantity:o.cantidad}),n.cartItemsId.push(o.id_funko)}),yield n.loadFunkoDetails()),null})()}obtenerTotalPrice(){let t=0;for(const n of this.cartItemsCopy)t+=n.price*n.quantity;this.totalPrice.next(t)}loadFunkoDetails(){var t=this;return(0,l.A)(function*(){t.cartItemsCopy=[];const n=new Map;for(const i of t.cartItems)try{const a=yield t.funkoService.getFunko(i.funkoId);if(a){const o={...a,quantity:i.quantity};n.set(i.funkoId,o)}else console.log("Item not found:",i)}catch(a){console.error("Error loading details for item:",i,a)}t.cartItemsCopy=Array.from(n.values())})()}increaseQuantity(t){var n=this;return(0,l.A)(function*(){n.loginService.authStateObservable()?.subscribe(function(){var i=(0,l.A)(function*(a){if(a){const o=a.id||0,s=t.quantity+1;yield n.funkoService.actualizarStock(t.id,t.stock-1),t.stock--,yield n.cartService.actualizarCantidades(o,n.cart.id,t.id,s),t.quantity=s,n.obtenerTotalPrice()}else n.cartLocalService.updateCartItem({funkoId:t.id,quantity:t.quantity+1}),t.quantity++,yield n.funkoService.actualizarStock(t.id,t.stock-1),t.stock--,n.totalQuantity.next(n.totalQuantity.value+1),n.obtenerTotalPrice()});return function(a){return i.apply(this,arguments)}}())})()}decreaseQuantity(t){var n=this;return(0,l.A)(function*(){t.quantity>0&&n.loginService.authStateObservable()?.subscribe(function(){var i=(0,l.A)(function*(a){if(a){const o=a.id||0,s=t.quantity-1;yield n.funkoService.actualizarStock(t.id,t.stock+1),t.stock++,yield n.cartService.actualizarCantidades(o,n.cart.id,t.id,s),t.quantity=s,n.obtenerTotalPrice()}else n.cartLocalService.updateCartItem({funkoId:t.id,quantity:t.quantity+1}),t.quantity--,yield n.funkoService.actualizarStock(t.id,t.stock+1),t.stock++,n.totalQuantity.next(n.totalQuantity.value-1),n.obtenerTotalPrice()});return function(a){return i.apply(this,arguments)}}())})()}calculateTotalPrice(t){return t.price*t.quantity}removeItem(t){var n=this;ue().fire({text:"\xbfEst\xe1 seguro de eliminar este producto?",icon:"warning",showCancelButton:!0,confirmButtonText:"ELIMINAR",cancelButtonText:"CANCELAR"}).then(function(){var i=(0,l.A)(function*(a){a.isConfirmed&&(n.user?n.loginService.authStateObservable()?.subscribe(function(){var o=(0,l.A)(function*(s){if(s){const h=s.id||0;(yield n.cartService.eliminarDelCarrito(t.id,h))&&(n.cartItems=n.cartItems.filter(O=>O.funkoId!==t.id)),yield n.loadFunkoDetails()}});return function(s){return o.apply(this,arguments)}}()):(n.cartLocalService.removeFromCart(t.id),n.cartItems=n.cartItems.filter(o=>o!==t)))});return function(a){return i.apply(this,arguments)}}())}getTotalQuantity(){return this.totalQuantity}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(w),e.rXU(v.I),e.rXU(E.H),e.rXU(j))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-cart"]],decls:34,vars:10,consts:[[1,"main","cart-main"],[1,"h1"],[1,"cart-items"],["class","cart-item",4,"ngFor","ngForOf"],[1,"cart-resumen"],[1,"cart-resumen-title"],[1,"cart-resumen-container"],[1,"cart-resumen-line"],["href","./checkout.html",1,"button","cart-pay-btn"],[1,"cart-item"],[1,"cart-item-info"],[1,"cart-item-picture"],[3,"src","alt"],[1,"cart-item-content"],[1,"cart-item-name"],[1,"cart-item-serie"],[1,"cart-item-license"],[1,"item-cart-quantity"],["id","subtract",1,"button","item-cart-quantity-btn",3,"click"],["type","text","id","quantity","placeholder","1",1,"item-input",3,"value"],["quantityButton",""],["id","add",1,"button","item-cart-quantity-btn",3,"click"],[1,"item-stock"],[1,"cart-total-price"],["src","../../../../assets/img/close-icon.svg",1,"cart-item-delete",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"main",0)(1,"h1",1),e.EFF(2,"CARRITO DE COMPRAS"),e.k0s(),e.j41(3,"ul",2),e.DNE(4,me,25,9,"li",3),e.k0s(),e.j41(5,"section",4)(6,"h2",5),e.EFF(7,"RESUMEN"),e.k0s(),e.j41(8,"article",6)(9,"div",7)(10,"p"),e.EFF(11,"PRODUCTOS"),e.k0s(),e.j41(12,"p"),e.EFF(13),e.nI1(14,"async"),e.k0s()(),e.j41(15,"div",7)(16,"p"),e.EFF(17,"SUBTOTAL"),e.k0s(),e.j41(18,"p"),e.EFF(19),e.nI1(20,"async"),e.k0s()(),e.j41(21,"div",7)(22,"p"),e.EFF(23,"ENV\xcdO"),e.k0s(),e.j41(24,"p"),e.EFF(25,"$0,00"),e.k0s()(),e.j41(26,"div",7)(27,"p"),e.EFF(28,"TOTAL"),e.k0s(),e.j41(29,"p"),e.EFF(30),e.nI1(31,"async"),e.k0s()()(),e.j41(32,"a",8),e.EFF(33,"PAGAR"),e.k0s()()()),2&n&&(e.R7$(4),e.Y8G("ngForOf",i.cartItemsCopy),e.R7$(9),e.JRh(e.bMT(14,4,i.totalQuantity)),e.R7$(6),e.SpI("$",e.bMT(20,6,i.totalPrice),""),e.R7$(11),e.SpI("$",e.bMT(31,8,i.totalPrice),""))},dependencies:[P.Sq,P.Jj],styles:[".cart-main[_ngcontent-%COMP%]{display:grid}.cart-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.cart-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:2rem;padding:3rem;border:.2rem solid var(--primary);border-radius:.5rem}@media screen and (min-width: 992px){.cart-item[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-around;align-items:center;gap:0}}.cart-item-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}@media screen and (min-width: 768px){.cart-item-info[_ngcontent-%COMP%]{flex-direction:row}}.cart-item-picture[_ngcontent-%COMP%]{width:15rem;height:15rem}.cart-item-picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;object-fit:contain}.cart-item-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;padding:2rem}@media screen and (min-width: 992px){.cart-item-content[_ngcontent-%COMP%]{width:25vw;align-items:flex-start}}.cart-item-name[_ngcontent-%COMP%]{font-size:var(--font-medium);font-weight:1000;align-self:center}@media screen and (min-width: 768px){.cart-item-name[_ngcontent-%COMP%]{font-size:var(--font-large);align-self:flex-start}}.cart-item-serie[_ngcontent-%COMP%]{font-size:var(--font-small);font-weight:500;align-self:center}@media screen and (min-width: 992px){.cart-item-serie[_ngcontent-%COMP%]{font-size:var(--font-medium);align-self:flex-start}}.cart-item-license[_ngcontent-%COMP%]{font-size:var(--font-xsmall);font-weight:500;align-self:center}@media screen and (min-width: 768px){.cart-item-license[_ngcontent-%COMP%]{font-size:var(--font-small);align-self:flex-start}}.cart-total-price[_ngcontent-%COMP%]{font-size:var(--font-medium);font-weight:500;margin-top:3rem}@media screen and (min-width: 768px){.cart-total-price[_ngcontent-%COMP%]{font-size:var(--font-large)}}@media screen and (min-width: 992px){.cart-total-price[_ngcontent-%COMP%]{width:10vw;text-align:end;margin-top:0}}.cart-item-delete[_ngcontent-%COMP%]{width:3rem;height:3rem;cursor:pointer;margin:1rem}.cart-resumen[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:space-around;gap:2rem;margin:2rem auto}@media screen and (min-width: 768px){.cart-resumen[_ngcontent-%COMP%]{width:50%}}@media screen and (min-width: 992px){.cart-resumen[_ngcontent-%COMP%]{justify-self:flex-end;margin:2rem 0}}.cart-resumen-title[_ngcontent-%COMP%]{font-size:var(--font-medium);font-weight:500;text-align:center}@media screen and (min-width: 768px){.cart-resumen-title[_ngcontent-%COMP%]{font-size:var(--font-large)}}.cart-resumen-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:3rem;border:.2rem solid var(--primary);border-radius:.5rem}.cart-resumen-line[_ngcontent-%COMP%]{font-size:var(--font-xsmall);display:flex;justify-content:space-between;gap:2rem}@media screen and (min-width: 768px){.cart-resumen-line[_ngcontent-%COMP%]{font-size:var(--font-small)}}.cart-resumen-line[_ngcontent-%COMP%]:nth-of-type(4){border-top:.2rem solid var(--primary);padding-top:1rem}.cart-pay-btn[_ngcontent-%COMP%]{align-self:center;max-width:50%}"]})}}return r})();const pe=[{path:"",component:T},{path:"cart",component:(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-cart-page"]],decls:3,vars:0,template:function(n,i){1&n&&e.nrm(0,"app-header")(1,"app-cart")(2,"app-footer")},dependencies:[C.l,F.n,he]})}}return r})()},{path:":id",component:se}];let fe=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[c.iI.forChild(pe),c.iI]})}}return r})();var ge=d(401);let _e=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[P.MD,fe,ge.G,g.YN]})}}return r})()}}]);