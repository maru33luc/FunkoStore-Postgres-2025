"use strict";(self.webpackChunkFunkoStore=self.webpackChunkFunkoStore||[]).push([[428],{2746:(_o,Ee,g)=>{g.d(Ee,{P:()=>O});var W=g(5861),m=g(4946),o=g(8443),ce=g(6814),ue=g(9310);const Pe=function(){return{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!0}};function B(M,l){if(1&M&&(m.TgZ(0,"li",6)(1,"a",7)(2,"picture",8)(3,"span",9),m._uU(4,"NUEVO"),m.qZA(),m._UZ(5,"img",10)(6,"img",11),m.qZA(),m.TgZ(7,"div",12)(8,"h3",13),m._uU(9),m.qZA(),m.TgZ(10,"p",14),m._uU(11),m.qZA(),m.TgZ(12,"p",15),m._uU(13),m.qZA(),m.TgZ(14,"p",16),m._uU(15),m.qZA()()()()),2&M){const _=l.$implicit;m.xp6(1),m.Q6J("routerLink","/shop/"+_.id),m.xp6(4),m.Q6J("src",_.front_image,m.LSH),m.xp6(1),m.Q6J("src",_.back_image,m.LSH),m.xp6(3),m.Oqu(_.name),m.xp6(2),m.Oqu(_.serie),m.xp6(2),m.Oqu(_.licence),m.xp6(2),m.hij("$",_.price.toLocaleString("es",m.DdM(7,Pe)),"")}}let O=(()=>{class M{constructor(_){this.funkoService=_,this.lista=[],this.itemsPerPage=4,this.currentPage=0,this.pages=[]}ngOnInit(){this.mostrarFunkos(),window.addEventListener("resize",()=>{this.updateItemsPerPage()})}mostrarFunkos(){var _=this;return(0,W.Z)(function*(){const b=yield _.funkoService.getFunkos();null!=b?(_.lista=b,_.filtroLista&&(_.lista=_.lista.filter(R=>R.licence===_.filtroLista)),_.calculateTotalPages()):console.log("Error al mostrar los funkos")})()}calculateTotalPages(){this.pages=Array(Math.ceil(this.lista.length/this.itemsPerPage)).fill(0).map((_,b)=>b)}get pagedItems(){const _=this.currentPage*this.itemsPerPage;return this.lista.slice(_,_+this.itemsPerPage)}changePage(_){return this.currentPage=_<0?0:_>=this.pages.length?this.pages.length-1:_,!1}updateItemsPerPage(){this.itemsPerPage=window.innerWidth<=1200&&window.innerWidth>992?3:window.innerWidth<=992&&window.innerWidth>576?2:window.innerWidth<=576?1:4}static#e=this.\u0275fac=function(b){return new(b||M)(m.Y36(o.E))};static#t=this.\u0275cmp=m.Xpm({type:M,selectors:[["app-slider"]],inputs:{title:"title",filtroLista:"filtroLista"},decls:10,vars:2,consts:[[1,"main","slider-container"],[1,"h2","slider-title"],[1,"slider-items"],["class","slider-item",4,"ngFor","ngForOf"],[1,"slider-nav"],[1,"button",3,"click"],[1,"slider-item"],[3,"routerLink"],[1,"item-cover"],[1,"item-tag"],["alt","Figura coleccionable Funko",1,"item-img-front",3,"src"],["alt","Figura coleccionable Funko en caja",1,"item-img-back",3,"src"],[1,"item-info"],[1,"item-name"],[1,"item-serie"],[1,"item-license"],[1,"item-price"]],template:function(b,R){1&b&&(m.TgZ(0,"section",0)(1,"h2",1),m._uU(2),m.qZA(),m.TgZ(3,"ul",2),m.YNc(4,B,16,8,"li",3),m.qZA(),m.TgZ(5,"div",4)(6,"button",5),m.NdJ("click",function(){return R.changePage(R.currentPage-1)}),m._uU(7,"ANTERIOR"),m.qZA(),m.TgZ(8,"button",5),m.NdJ("click",function(){return R.changePage(R.currentPage+1)}),m._uU(9,"SIGUIENTE"),m.qZA()()()),2&b&&(m.xp6(2),m.Oqu(R.title),m.xp6(2),m.Q6J("ngForOf",R.pagedItems))},dependencies:[ce.sg,ue.rH],styles:[".slider-container[_ngcontent-%COMP%]{gap:3rem}.slider-title[_ngcontent-%COMP%]{text-transform:uppercase}.slider-items[_ngcontent-%COMP%]{display:flex;gap:3rem;margin:0 auto}.slider-item[_ngcontent-%COMP%]{width:100%}.slider-nav[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:2rem;margin:1rem 0}@media screen and (min-width: 576px){.slider-nav[_ngcontent-%COMP%]{gap:5rem}}"]})}return M})()},1428:(_o,Ee,g)=>{g.r(Ee),g.d(Ee,{ShopModule:()=>Nl});var W=g(6814),m=g(9310),o=g(4946),ce=g(9762),ue=g(1161),Pe=g(7829),B=g(8443),O=g(95);let M=(()=>{class n{constructor(t,r){this.orderService=t,this.funkoService=r,this.searchQuery="",this.orderType="az",this.minPrice=0,this.maxPrice=0}ngOnInit(){this.destildarCheckbox("category"),this.destildarCheckbox("saga")}ngOnDestroy(){this.clearFilters()}onOrderChange(){this.orderService.setOrderType(this.orderType),this.funkoService.aplicarFiltro("order",this.orderType,0,0)}onSearchChange(t){this.orderService.setSearchQuery(t),0==t.length&&(this.funkoService.undoFilters(),this.funkoService.limpiarFiltro("name"))}onCategoryChange(t,r){t.target.checked?this.orderService.setCategoryQuery(r):(this.orderService.setCategoryQuery(""),this.funkoService.undoFilters(),this.funkoService.limpiarFiltro("category"))}onLicenceChange(t,r){t.target.checked?this.orderService.setLicenceQuery(r):(this.orderService.setLicenceQuery(""),this.funkoService.undoFilters(),this.funkoService.limpiarFiltro("licence"))}onPriceFilterChange(){if(this.minPrice<0||this.maxPrice<0)return alert("El precio no puede ser negativo"),this.minPrice=0,void(this.maxPrice=0);this.maxPrice>=0&&this.maxPrice>=this.minPrice&&(this.orderService.setMinPrice(this.minPrice),this.orderService.setMaxPrice(this.maxPrice),this.funkoService.aplicarFiltro("price","",this.minPrice,this.maxPrice))}clearMinPricePlaceholder(){0===this.minPrice&&(this.minPrice=NaN)}clearMaxPricePlaceholder(){0===this.maxPrice&&(this.maxPrice=NaN)}resetMinPricePlaceholder(){isNaN(this.minPrice)&&(this.minPrice=0)}resetMaxPricePlaceholder(){isNaN(this.maxPrice)&&(this.maxPrice=0)}clearFilters(){this.searchQuery="",this.orderType="az",this.minPrice=0,this.maxPrice=0,this.orderService.setSearchQuery(""),this.orderService.setOrderType("az"),this.orderService.setCategoryQuery(""),this.orderService.setLicenceQuery(""),this.orderService.setMinPrice(0),this.orderService.setMaxPrice(0),this.funkoService.showAllFunkos(),this.funkoService.clearAllFilters(),this.limpiarCheckboxes("category"),this.limpiarCheckboxes("saga")}limpiarCheckboxes(t){document.querySelectorAll('input[type="checkbox"][name="'+t+'"]').forEach(i=>{i.checked=!1,i.disabled=!1})}destildarCheckbox(t){const r=document.querySelectorAll('input[type="checkbox"][name="'+t+'"]');r.forEach(i=>{i.addEventListener("change",s=>{i.checked&&r.forEach(c=>{c!==i&&(c.checked=!1)})})})}static#e=this.\u0275fac=function(r){return new(r||n)(o.Y36(Pe.x),o.Y36(B.E))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-shop-aside"]],decls:75,vars:4,consts:[[1,"shop-aside"],[1,"shop-aside-box"],["for","search",1,"shop-aside-label"],["id","search","type","text","name","searchQuery","placeholder","Nombre",1,"shop-aside-input",3,"ngModel","ngModelChange"],["for","order",1,"shop-aside-label"],["id","order","name","orderType",1,"shop-aside-input",3,"ngModel","ngModelChange","change"],["value","az"],["value","za"],["value","desc"],["value","asc"],[1,"shop-aside-label"],[1,"shop-aside-price"],["for","min-price",1,"shop-aside-label-small"],["id","min-price","type","number",1,"shop-aside-input",3,"ngModel","ngModelChange","focus","blur","input"],["for","max-price",1,"shop-aside-label-small"],["id","max-price","type","number",1,"shop-aside-input",3,"ngModel","ngModelChange","focus","blur","input"],[1,"shop-aside-label-small"],[1,"shop-aside-checkbox"],["id","minis","name","category","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","minis",1,"shop-aside-label-small"],["id","keychain","name","category","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","keychain",1,"shop-aside-label-small"],["id","plushies","name","category","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","plushies",1,"shop-aside-label-small"],["id","pop-vinyl","name","category","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","pop-vinyl",1,"shop-aside-label-small"],["id","favorites","name","category","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","favorites",1,"shop-aside-label-small"],["id","lotr","name","saga","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","lotr",1,"shop-aside-label-small"],["id","harry-potter","name","saga","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","harry-potter",1,"shop-aside-label-small"],["id","star-wars","name","saga","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","star-wars",1,"shop-aside-label-small"],["id","pokemon","name","saga","type","checkbox",1,"shop-aside-checkbox-input",3,"click"],["for","pokemon",1,"shop-aside-label-small"],[1,"button",3,"click"]],template:function(r,i){1&r&&(o.TgZ(0,"aside",0)(1,"div",1)(2,"label",2),o._uU(3,"BUSCAR"),o.qZA(),o.TgZ(4,"input",3),o.NdJ("ngModelChange",function(a){return i.searchQuery=a})("ngModelChange",function(a){return i.onSearchChange(a)}),o.qZA()(),o.TgZ(5,"div",1)(6,"label",4),o._uU(7,"ORDENAR POR"),o.qZA(),o.TgZ(8,"select",5),o.NdJ("ngModelChange",function(a){return i.orderType=a})("change",function(){return i.onOrderChange()}),o.TgZ(9,"option",6),o._uU(10,"A-Z"),o.qZA(),o.TgZ(11,"option",7),o._uU(12,"Z-A"),o.qZA(),o.TgZ(13,"option",8),o._uU(14,"Mayor precio"),o.qZA(),o.TgZ(15,"option",9),o._uU(16,"Menor precio"),o.qZA()()(),o.TgZ(17,"div",1)(18,"label",10),o._uU(19,"PRECIO"),o.qZA(),o.TgZ(20,"div",11)(21,"div",1)(22,"label",12),o._uU(23,"Min"),o.qZA(),o.TgZ(24,"input",13),o.NdJ("ngModelChange",function(a){return i.minPrice=a})("focus",function(){return i.clearMinPricePlaceholder()})("blur",function(){return i.resetMinPricePlaceholder()})("input",function(){return i.onPriceFilterChange()}),o.qZA()(),o.TgZ(25,"div",1)(26,"label",14),o._uU(27,"Max"),o.qZA(),o.TgZ(28,"input",15),o.NdJ("ngModelChange",function(a){return i.maxPrice=a})("focus",function(){return i.clearMaxPricePlaceholder()})("blur",function(){return i.resetMaxPricePlaceholder()})("input",function(){return i.onPriceFilterChange()}),o.qZA()()()(),o.TgZ(29,"div",1)(30,"h2",10),o._uU(31,"FILTRAR"),o.qZA(),o.TgZ(32,"h3",16),o._uU(33,"Por categor\xeda"),o.qZA(),o.TgZ(34,"div",17)(35,"input",18),o.NdJ("click",function(a){return i.onCategoryChange(a,"Minis")}),o.qZA(),o.TgZ(36,"label",19),o._uU(37,"Minis"),o.qZA()(),o.TgZ(38,"div",17)(39,"input",20),o.NdJ("click",function(a){return i.onCategoryChange(a,"Keychain")}),o.qZA(),o.TgZ(40,"label",21),o._uU(41,"Keychain"),o.qZA()(),o.TgZ(42,"div",17)(43,"input",22),o.NdJ("click",function(a){return i.onCategoryChange(a,"Plushies")}),o.qZA(),o.TgZ(44,"label",23),o._uU(45,"Plushies"),o.qZA()(),o.TgZ(46,"div",17)(47,"input",24),o.NdJ("click",function(a){return i.onCategoryChange(a,"Pop! Vinyl")}),o.qZA(),o.TgZ(48,"label",25),o._uU(49,"Pop! Vinyl"),o.qZA()(),o.TgZ(50,"div",17)(51,"input",26),o.NdJ("click",function(a){return i.onCategoryChange(a,"Favorites")}),o.qZA(),o.TgZ(52,"label",27),o._uU(53,"Favoritos"),o.qZA()()(),o.TgZ(54,"div",1)(55,"h3",16),o._uU(56,"Por saga"),o.qZA(),o.TgZ(57,"div",17)(58,"input",28),o.NdJ("click",function(a){return i.onLicenceChange(a,"The Lord of the Rings")}),o.qZA(),o.TgZ(59,"label",29),o._uU(60,"Lord of the Rings"),o.qZA()(),o.TgZ(61,"div",17)(62,"input",30),o.NdJ("click",function(a){return i.onLicenceChange(a,"Harry Potter")}),o.qZA(),o.TgZ(63,"label",31),o._uU(64,"Harry Potter"),o.qZA()(),o.TgZ(65,"div",17)(66,"input",32),o.NdJ("click",function(a){return i.onLicenceChange(a,"Star Wars")}),o.qZA(),o.TgZ(67,"label",33),o._uU(68,"Star Wars"),o.qZA()(),o.TgZ(69,"div",17)(70,"input",34),o.NdJ("click",function(a){return i.onLicenceChange(a,"Pokemon")}),o.qZA(),o.TgZ(71,"label",35),o._uU(72,"Pokemon"),o.qZA()()(),o.TgZ(73,"button",36),o.NdJ("click",function(){return i.clearFilters()}),o._uU(74,"LIMPIAR FILTROS"),o.qZA()()),2&r&&(o.xp6(4),o.Q6J("ngModel",i.searchQuery),o.xp6(4),o.Q6J("ngModel",i.orderType),o.xp6(16),o.Q6J("ngModel",i.minPrice),o.xp6(4),o.Q6J("ngModel",i.maxPrice))},dependencies:[O.YN,O.Kr,O.Fj,O.wV,O.EJ,O.JJ,O.On],styles:[".shop-aside[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;gap:4rem;margin:3rem auto}@media screen and (min-width: 576px){.shop-aside[_ngcontent-%COMP%]{margin:6rem 2rem}}@media screen and (min-width: 996px){.shop-aside[_ngcontent-%COMP%]{margin:6rem 4rem}}.shop-aside-box[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:flex-start;gap:1rem}.shop-aside-label[_ngcontent-%COMP%]{font-size:var(--font-xsmall);font-weight:600}@media screen and (min-width: 768px){.shop-aside-label[_ngcontent-%COMP%]{font-size:var(--font-small)}}.shop-aside-input[_ngcontent-%COMP%]{width:100%;font-size:var(--font-xsmall);padding:1rem .5rem;border:.2rem solid var(--dark-font);border-radius:.5rem}@media screen and (min-width: 768px){.shop-aside-input[_ngcontent-%COMP%]{font-size:var(--font-small)}}.shop-aside-input[_ngcontent-%COMP%]:focus{outline:0;border:.2rem solid var(--primary)}.shop-aside-price[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}@media screen and (min-width: 576px){.shop-aside-price[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start}}.shop-aside-label-small[_ngcontent-%COMP%]{font-size:var(--font-xsmall);font-weight:500;letter-spacing:.1rem}@media screen and (min-width: 768px){.shop-aside-label-small[_ngcontent-%COMP%]{font-size:var(--font-small)}}.shop-aside-checkbox[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.shop-aside-checkbox-input[_ngcontent-%COMP%]{width:1rem;height:1rem}@media screen and (min-width: 768px){.shop-aside-checkbox-input[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}}"]})}return n})();var l=g(5861);const _=function(){return{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!0}};function b(n,e){if(1&n&&(o.TgZ(0,"li")(1,"article",4)(2,"a",5)(3,"picture",6)(4,"span",7),o._uU(5,"NUEVO"),o.qZA(),o._UZ(6,"img",8)(7,"img",9),o.qZA(),o.TgZ(8,"div",10)(9,"p",11),o._uU(10),o.qZA(),o.TgZ(11,"p",12),o._uU(12),o.qZA(),o.TgZ(13,"p",13),o._uU(14),o.qZA(),o.TgZ(15,"p",14),o._uU(16),o.qZA()()()()()),2&n){const t=e.$implicit;o.xp6(2),o.Q6J("routerLink","/shop/"+t.id),o.xp6(4),o.Q6J("src",t.front_image,o.LSH),o.xp6(1),o.Q6J("src",t.back_image,o.LSH),o.xp6(3),o.Oqu(t.name),o.xp6(2),o.Oqu(t.serie),o.xp6(2),o.Oqu(t.licence),o.xp6(2),o.hij("$",t.price.toLocaleString("es",o.DdM(7,_)),"")}}function R(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"li",20),o.NdJ("click",function(){const s=o.CHM(t).index,a=o.oxw(2);return o.KtG(a.changePage(s))}),o._uU(1),o.qZA()}if(2&n){const t=e.index,r=o.oxw(2);o.ekj("active",t===r.currentPage),o.xp6(1),o.hij("",t+1," ")}}function Ye(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",15)(1,"ul",16)(2,"li",17),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.changePage(i.currentPage-1))}),o._uU(3," \xab "),o.qZA(),o.YNc(4,R,2,3,"li",18),o.TgZ(5,"li",19),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.changePage(i.currentPage+1))}),o._uU(6," \xbb "),o.qZA()()()}if(2&n){const t=o.oxw();o.xp6(2),o.ekj("disabled",0===t.currentPage),o.xp6(2),o.Q6J("ngForOf",t.pages),o.xp6(1),o.ekj("disabled",t.currentPage===t.pages.length-1)}}let go=(()=>{class n{constructor(t,r,i){this.funkoService=t,this.orderService=r,this.activatedRoute=i,this.lista=[],this.itemsPerPage=9,this.currentPage=0,this.pages=[],this.showPagination=!0,this.minPrice=0,this.maxPrice=0}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{const r=t.get("licence");null!=r?(this.orderService.setLicenceQuery(r||""),this.funkoService.aplicarFiltro("licence",r||"",0,0),this.currentPage=0,this.calculateTotalPages()):this.mostrarFunkos()}),this.filteredFunkos$=this.funkoService.getFilteredFunkosObservable(),window.addEventListener("resize",()=>{this.updateItemsPerPage()}),this.orderService.orderType$.subscribe(t=>{("az"===t||"za"===t)&&(this.funkoService.aplicarFiltro("order",t,0,0),this.currentPage=0,this.calculateTotalPages())}),this.orderService.searchQuery$.subscribe(t=>{0!==t.length?(this.funkoService.aplicarFiltro("name",t,0,0),this.currentPage=0,this.calculateTotalPages()):(this.funkoService.limpiarFiltro("name"),this.lista=this.funkoService.mostrarListaFiltrada())}),this.funkoService.getFilteredFunkosObservable().subscribe(t=>{this.lista=t,this.currentPage=0,this.calculateTotalPages(),this.updatePaginationVisibility()}),this.orderService.minPriceSubject.subscribe(t=>{0!==t&&(this.minPrice=t,this.funkoService.aplicarFiltro("price","",t,this.maxPrice),this.currentPage=0,this.calculateTotalPages())}),this.orderService.maxPriceSubject.subscribe(t=>{0!==t&&(this.maxPrice=t,this.funkoService.aplicarFiltro("price","",this.minPrice,this.maxPrice),this.currentPage=0,this.calculateTotalPages())}),this.orderService.categoryQuery$.subscribe(t=>{0!==t.length?(this.funkoService.aplicarFiltro("category",t,0,0),this.currentPage=0,this.calculateTotalPages()):(this.funkoService.limpiarFiltro("category"),this.lista=this.funkoService.mostrarListaFiltrada())}),this.orderService.licenceQuery$?.subscribe(t=>{0!==t.length?(this.funkoService.aplicarFiltro("licence",t,0,0),this.currentPage=0,this.calculateTotalPages()):(this.funkoService.limpiarFiltro("licence"),this.lista=this.funkoService.mostrarListaFiltrada())})}mostrarFunkos(){var t=this;return(0,l.Z)(function*(){const r=yield t.funkoService.getFunkos();null!=r?(t.lista=r,t.lista.sort((i,s)=>i.name.localeCompare(s.name)),t.calculateTotalPages()):console.log("Error al mostrar los funkos")})()}calculateTotalPages(){this.pages=Array(Math.ceil(this.lista.length/this.itemsPerPage)).fill(0).map((t,r)=>r)}get paginatedItems(){const t=this.currentPage*this.itemsPerPage;return this.lista.slice(t,t+this.itemsPerPage)}changePage(t){return this.currentPage=t<0?0:t>=this.pages.length?this.pages.length-1:t,window.scrollTo(0,0),!1}updateItemsPerPage(){this.itemsPerPage=window.innerWidth<=1200&&window.innerWidth>=992?8:window.innerWidth<992&&window.innerWidth>=768?6:window.innerWidth<768?4:9}updatePaginationVisibility(){this.showPagination=void 0!==this.filteredFunkos$&&0!==this.lista.length}static#e=this.\u0275fac=function(r){return new(r||n)(o.Y36(B.E),o.Y36(Pe.x),o.Y36(m.gz))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-shop-main"]],decls:4,vars:2,consts:[[1,"shop-main"],[1,"shop-main-items"],[4,"ngFor","ngForOf"],["class","pagination",4,"ngIf"],[1,"shop-main-item"],[3,"routerLink"],[1,"item-cover"],[1,"item-tag"],["alt","Figura coleccionable Funko",1,"item-img-front",3,"src"],["alt","Figura coleccionable Funko",1,"item-img-back",3,"src"],[1,"item-info"],[1,"item-name"],[1,"item-serie"],[1,"item-license"],[1,"item-price"],[1,"pagination"],[1,"pagination-list"],["id","pagination-previous-page",3,"click"],["class","pagination-page-link",3,"active","click",4,"ngFor","ngForOf"],["id","pagination-next-page",3,"click"],[1,"pagination-page-link",3,"click"]],template:function(r,i){1&r&&(o.TgZ(0,"main",0)(1,"ul",1),o.YNc(2,b,17,8,"li",2),o.qZA(),o.YNc(3,Ye,7,5,"div",3),o.qZA()),2&r&&(o.xp6(2),o.Q6J("ngForOf",i.paginatedItems),o.xp6(1),o.Q6J("ngIf",i.showPagination))},dependencies:[W.sg,W.O5,m.rH],styles:[".shop-main[_ngcontent-%COMP%]{margin:3rem auto}@media screen and (min-width: 768px){.shop-main[_ngcontent-%COMP%]{min-width:80vw;margin:6rem 2rem}}@media screen and (min-width: 996px){.shop-main[_ngcontent-%COMP%]{margin:6rem 4rem}}.shop-main-items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:2rem}.shop-main-item[_ngcontent-%COMP%]{width:25rem;margin:0 auto}@media screen and (min-width: 992px){.shop-main-item[_ngcontent-%COMP%]{margin:2rem}}"]})}return n})(),yo=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-shop-page"]],decls:5,vars:0,consts:[[1,"shop-container"]],template:function(r,i){1&r&&(o._UZ(0,"app-header"),o.TgZ(1,"div",0),o._UZ(2,"app-shop-aside")(3,"app-shop-main"),o.qZA(),o._UZ(4,"app-footer"))},dependencies:[ce.G,ue.c,M,go],styles:[".shop-container[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center}@media screen and (min-width: 576px){.shop-container[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start}}"]})}return n})();var vo=g(2746),be=g(5619),te=g(1027),w=g(7484),Qe=g(7876);let Rr=(()=>{class n{constructor(t){var r=this;this.loginService=t,this.cart=[],this.cartId=void 0,this.cartSubject=new be.X(this.cart),this.url=te.T.urlCartData,this.loginService.authStateObservable()?.subscribe(function(){var i=(0,l.Z)(function*(s){if(s){r.userId=s.id;const a=yield r.obtenerCartPorUserId(r.userId);r.cartId=a.id;const c=yield w.Z.get(`${r.url}/items/${r.userId}`);r.cart=c.data,r.cartSubject.next(r.cart)}});return function(s){return i.apply(this,arguments)}}()),this.cartSubject.subscribe(i=>{this.cart=i})}obtenerCartPorUserId(t){var r=this;return(0,l.Z)(function*(){try{return(yield w.Z.get(`${r.url}/${t}`)).data}catch(i){throw console.log(i),i}})()}obtenerCarts(){var t=this;return(0,l.Z)(function*(){try{return(yield w.Z.get(`${t.url}`)).data}catch(r){throw console.log(r),r}})()}obtenerCarritoDeCompras(t){var r=this;return(0,l.Z)(function*(){try{const i=yield w.Z.get(`${r.url}/items/${r.userId}`);if(i){const s=i.data;return r.cart=s,r.cartSubject.next(r.cart),s}return[]}catch(i){throw console.log(i),i}})()}agregarAlCarrito(t,r){var i=this;return(0,l.Z)(function*(){try{if(!i.cart.find(s=>s.id_funko===t)){const s=yield i.obtenerCarts(),a=yield i.obtenerCartPorUserId(i.userId),c=s.length,d=(yield w.Z.post(`${i.url}/items/${i.userId}`,{id:c+1,id_cart:a.id,id_funko:t,quantity:r})).data;return i.cart.push(d),i.cartSubject.next(i.cart),d}}catch(s){throw console.log(s),s}})()}actualizarCantidades(t,r,i,s){var a=this;return(0,l.Z)(function*(){try{return yield w.Z.put(`${a.url}/items/${t}`,{id_funko:i,cantidad:s}),a.cart=yield a.obtenerCarritoDeCompras(t),a.cartSubject.next(a.cart),a.cart}catch(c){throw console.log(c),c}})()}eliminarDelCarrito(t,r){var i=this;return(0,l.Z)(function*(){try{return yield w.Z.delete(`${i.url}/items/${r}`,{data:{id_funko:t}}),i.cart=i.cart.filter(a=>a.id_funko!==t),i.cartSubject.next(i.cart),i.cart}catch(s){throw console.log(s),s}})()}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(Qe.r))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Io=(()=>{class n{constructor(){this.url=te.T.urlAPITolkien,this.token=te.T.tokenAPITolkien}getCharacterInfo(t){var r=this;return(0,l.Z)(function*(){try{const i=`^${t}`;return(yield w.Z.get(`${r.url}/character?name=/${i}/i`,{headers:{Authorization:`Bearer ${r.token}`}})).data}catch(i){alert("Error en la solicitud"+i)}})()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xr=(()=>{class n{constructor(){this.dbName="cartDB",this.dbVersion=1,this.cartStoreName="cartItems",this.db=null,this.cart=[],this.cartSubject=new be.X(this.cart),this.initDatabase(),this.cartSubject.subscribe(t=>{this.cart=t})}initDatabase(){const t=indexedDB.open(this.dbName,this.dbVersion);t.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains(this.cartStoreName)||i.createObjectStore(this.cartStoreName,{keyPath:"funkoId"})},t.onsuccess=r=>{this.db=r.target.result,this.getCart()},t.onerror=r=>{console.error("Error opening indexedDB:",r.target.error)}}addToCart(t){var r=this;return(0,l.Z)(function*(){if(!r.db)throw new Error("Database not initialized");const s=r.db.transaction(r.cartStoreName,"readwrite").objectStore(r.cartStoreName),a=s.get(t.funkoId),c=yield new Promise((u,d)=>{a.onsuccess=()=>u(a.result),a.onerror=()=>d(a.error)});c?(c.quantity+=t.quantity,yield s.put(c)):yield s.add(t)})()}removeFromCart(t){var r=this;return(0,l.Z)(function*(){if(!r.db)return;const s=r.db.transaction(r.cartStoreName,"readwrite").objectStore(r.cartStoreName);try{yield s.delete(t),yield r.getCart()}catch(a){console.error("Error removing item from cart:",a)}})()}getCart(){var t=this;return(0,l.Z)(function*(){if(!t.db)return[];const s=t.db.transaction(t.cartStoreName,"readonly").objectStore(t.cartStoreName).getAll();return new Promise((a,c)=>{s.onsuccess=()=>{a(s.result),t.cart=s.result,t.cartSubject.next(t.cart)},s.onerror=()=>c(s.error)})})()}getCartItemFromDatabase(t){var r=this;return(0,l.Z)(function*(){if(!r.db)return;const a=r.db.transaction(r.cartStoreName,"readonly").objectStore(r.cartStoreName).get(t);return new Promise((c,u)=>{a.onsuccess=()=>c(a.result),a.onerror=()=>u(a.error)})})()}updateCartItem(t){var r=this;return(0,l.Z)(function*(){if(!r.db)throw new Error("Database not initialized");const s=r.db.transaction(r.cartStoreName,"readwrite").objectStore(r.cartStoreName),a=s.get(t.funkoId),c=yield new Promise((u,d)=>{a.onsuccess=()=>u(a.result),a.onerror=()=>d(a.error)});c&&(c.quantity=t.quantity,yield s.put(c))})()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),To=(()=>{class n{constructor(){this.url=te.T.urlAPIPotter}getCharacterInfo(t){var r=this;return(0,l.Z)(function*(){try{const a=(yield(0,w.Z)(`${r.url}/api/characters`)).data.filter(c=>c.name===t);return 0===a.length?void 0:a[0]}catch(i){return void alert("Error en la solicitud"+i)}})()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ao=(()=>{class n{constructor(){this.url=te.T.urlAPIStarWars}getCharacterInfo(t){var r=this;return(0,l.Z)(function*(){try{const s=(yield(0,w.Z)(`${r.url}/characters/name/${t}`)).data;return void 0===s?void 0:s[0]}catch(i){alert("Error en la solicitud"+i)}})()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Eo=(()=>{class n{constructor(){this.url=te.T.urlPokemonJson}getPokemon(t){var r=this;return(0,l.Z)(function*(){try{return(yield w.Z.get(`${r.url}/pokemon/${t}`)).data}catch(i){console.log(i)}})()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Po=["addButton"],bo=["subtractButton"],ko=["quantityButton"];function So(n,e){if(1&n&&(o.ynx(0),o.TgZ(1,"a",29),o._uU(2),o.qZA(),o.BQk()),2&n){const t=o.oxw(3);o.xp6(1),o.s9C("href",null==t.characterInfo?null:t.characterInfo.wikiUrl,o.LSH),o.xp6(1),o.Oqu(null==t.characterInfo?null:t.characterInfo.wikiUrl)}}function Co(n,e){1&n&&(o.ynx(0),o._uU(1,"desconocido"),o.BQk())}function wo(n,e){if(1&n&&(o.ynx(0),o.TgZ(1,"p"),o._uU(2),o.qZA(),o.TgZ(3,"p"),o._uU(4),o.qZA(),o.TgZ(5,"p"),o._uU(6,"Link Wiki: "),o.YNc(7,So,3,2,"ng-container",28),o.YNc(8,Co,2,0,"ng-container",28),o.qZA(),o.TgZ(9,"p"),o._uU(10),o.qZA(),o.TgZ(11,"p"),o._uU(12),o.qZA(),o.BQk()),2&n){const t=o.oxw(2);o.xp6(2),o.hij("Raza: ",null!=t.characterInfo&&t.characterInfo.race?null==t.characterInfo?null:t.characterInfo.race:"desconocido",""),o.xp6(2),o.hij("Compa\xf1ero/a: ",null!=t.characterInfo&&t.characterInfo.spouse?null==t.characterInfo?null:t.characterInfo.spouse:"desconocido",""),o.xp6(3),o.Q6J("ngIf",null==t.characterInfo?null:t.characterInfo.wikiUrl),o.xp6(1),o.Q6J("ngIf",!(null!=t.characterInfo&&t.characterInfo.wikiUrl)),o.xp6(2),o.hij("Nacimiento: ",null!=t.characterInfo&&t.characterInfo.birth?null==t.characterInfo?null:t.characterInfo.birth:"desconocido",""),o.xp6(2),o.hij("Muerte: ",null!=t.characterInfo&&t.characterInfo.death?null==t.characterInfo?null:t.characterInfo.death:"desconocido","")}}function Oo(n,e){1&n&&o._UZ(0,"img",30)}function Ro(n,e){if(1&n&&(o.TgZ(0,"section",24)(1,"h4",25),o._uU(2,"INFORMACI\xd3N ADICIONAL"),o.qZA(),o.YNc(3,wo,13,6,"ng-container",26),o.YNc(4,Oo,1,0,"ng-template",null,27,o.W1O),o.qZA()),2&n){const t=o.MAs(5),r=o.oxw();o.xp6(3),o.Q6J("ngIf",r.dataLoaded)("ngIfElse",t)}}function xo(n,e){if(1&n&&o._UZ(0,"img",33),2&n){const t=o.oxw(3);o.s9C("src",null==t.characterInfoPotter?null:t.characterInfoPotter.image,o.LSH)}}function No(n,e){if(1&n&&(o.ynx(0),o.TgZ(1,"div")(2,"p"),o._uU(3),o.qZA(),o.TgZ(4,"p"),o._uU(5),o.qZA(),o.TgZ(6,"p"),o._uU(7),o.qZA(),o.TgZ(8,"p"),o._uU(9),o.qZA(),o.TgZ(10,"p"),o._uU(11),o.qZA(),o.TgZ(12,"p"),o._uU(13),o.qZA(),o.TgZ(14,"p"),o._uU(15),o.qZA()(),o.YNc(16,xo,1,1,"img",32),o.BQk()),2&n){const t=o.oxw(2);o.xp6(3),o.hij("Especie: ",null!=t.characterInfoPotter&&t.characterInfoPotter.species?null==t.characterInfoPotter?null:t.characterInfoPotter.species:"desconocido",""),o.xp6(2),o.hij("Casa: ",null!=t.characterInfoPotter&&t.characterInfoPotter.house?null==t.characterInfoPotter?null:t.characterInfoPotter.house:"desconocido",""),o.xp6(2),o.hij("Nacimiento: ",null!=t.characterInfoPotter&&t.characterInfoPotter.dateOfBirth?null==t.characterInfoPotter?null:t.characterInfoPotter.dateOfBirth:"desconocido"," "),o.xp6(2),o.hij("Ancestros: ",null!=t.characterInfoPotter&&t.characterInfoPotter.ancestry?null==t.characterInfoPotter?null:t.characterInfoPotter.ancestry:"desconocido",""),o.xp6(2),o.hij("Patrono: ",null!=t.characterInfoPotter&&t.characterInfoPotter.patronus?null==t.characterInfoPotter?null:t.characterInfoPotter.patronus:"desconocido",""),o.xp6(2),o.hij("Madera de Varita: ",null!=t.characterInfoPotter&&null!=t.characterInfoPotter.wand&&t.characterInfoPotter.wand.wood?null==t.characterInfoPotter||null==t.characterInfoPotter.wand?null:t.characterInfoPotter.wand.wood:"desconocido",""),o.xp6(2),o.hij("N\xfacleo de Varita: ",null!=t.characterInfoPotter&&null!=t.characterInfoPotter.wand&&t.characterInfoPotter.wand.core?null==t.characterInfoPotter||null==t.characterInfoPotter.wand?null:t.characterInfoPotter.wand.core:"desconocido",""),o.xp6(1),o.Q6J("ngIf",null!=(null==t.characterInfoPotter?null:t.characterInfoPotter.image)&&""!=(null==t.characterInfoPotter?null:t.characterInfoPotter.image))}}function Mo(n,e){1&n&&o._UZ(0,"img",34)}function Do(n,e){if(1&n&&(o.TgZ(0,"section",31)(1,"h4",25),o._uU(2,"INFORMACI\xd3N ADICIONAL"),o.qZA(),o.YNc(3,No,17,8,"ng-container",26),o.YNc(4,Mo,1,0,"ng-template",null,27,o.W1O),o.qZA()),2&n){const t=o.MAs(5),r=o.oxw();o.xp6(3),o.Q6J("ngIf",r.dataLoaded)("ngIfElse",t)}}function Lo(n,e){if(1&n&&o._UZ(0,"img",33),2&n){const t=o.oxw(3);o.s9C("src",null==t.characterInfoStarWars?null:t.characterInfoStarWars.image,o.LSH)}}function Uo(n,e){if(1&n&&(o.ynx(0),o.TgZ(1,"p"),o._uU(2),o.qZA(),o.TgZ(3,"p"),o._uU(4),o.qZA(),o.YNc(5,Lo,1,1,"img",32),o.BQk()),2&n){const t=o.oxw(2);o.xp6(2),o.hij("Nombre: ",null!=t.characterInfoStarWars&&t.characterInfoStarWars.name?null==t.characterInfoStarWars?null:t.characterInfoStarWars.name:"desconocido",""),o.xp6(2),o.hij("Descripci\xf3n: ",null!=t.characterInfoStarWars&&t.characterInfoStarWars.description?null==t.characterInfoStarWars?null:t.characterInfoStarWars.description:"desconocido",""),o.xp6(1),o.Q6J("ngIf",null!=(null==t.characterInfoStarWars?null:t.characterInfoStarWars.image))}}function Fo(n,e){1&n&&o._UZ(0,"img",34)}function Zo(n,e){if(1&n&&(o.TgZ(0,"section",35)(1,"h4",25),o._uU(2,"INFORMACI\xd3N ADICIONAL"),o.qZA(),o.YNc(3,Uo,6,3,"ng-container",26),o.YNc(4,Fo,1,0,"ng-template",null,27,o.W1O),o.qZA()),2&n){const t=o.MAs(5),r=o.oxw();o.xp6(3),o.Q6J("ngIf",r.dataLoaded)("ngIfElse",t)}}function Wo(n,e){if(1&n&&(o.ynx(0),o.TgZ(1,"p")(2,"strong"),o._uU(3,"Nombre:"),o.qZA(),o._uU(4),o.qZA(),o.TgZ(5,"p")(6,"strong"),o._uU(7,"Descripci\xf3n:"),o.qZA(),o._uU(8),o.qZA(),o.TgZ(9,"p")(10,"strong"),o._uU(11,"Tipo:"),o.qZA(),o._uU(12),o.qZA(),o.TgZ(13,"p")(14,"strong"),o._uU(15,"Altura:"),o.qZA(),o._uU(16),o.qZA(),o.TgZ(17,"p")(18,"strong"),o._uU(19,"Peso:"),o.qZA(),o._uU(20),o.qZA(),o.BQk()),2&n){const t=o.oxw(2);o.xp6(4),o.hij(" ",null!=t.characterInfoPokemon&&t.characterInfoPokemon.name?null==t.characterInfoPokemon?null:t.characterInfoPokemon.name:"desconocido"," "),o.xp6(4),o.hij(" ",null!=t.characterInfoPokemon&&t.characterInfoPokemon.description?null==t.characterInfoPokemon?null:t.characterInfoPokemon.description:"desconocido"," "),o.xp6(4),o.hij(" ",null!=t.characterInfoPokemon&&t.characterInfoPokemon.type?null==t.characterInfoPokemon?null:t.characterInfoPokemon.type:"desconocido"," "),o.xp6(4),o.hij(" ",null!=t.characterInfoPokemon&&t.characterInfoPokemon.height?null==t.characterInfoPokemon?null:t.characterInfoPokemon.height:"desconocido"," "),o.xp6(4),o.hij(" ",null!=t.characterInfoPokemon&&t.characterInfoPokemon.weight?null==t.characterInfoPokemon?null:t.characterInfoPokemon.weight:"desconocido"," ")}}function Go(n,e){1&n&&o._UZ(0,"img",34)}function Vo(n,e){if(1&n&&(o.TgZ(0,"section",36)(1,"h4",25),o._uU(2,"INFORMACI\xd3N ADICIONAL"),o.qZA(),o.YNc(3,Wo,21,5,"ng-container",26),o.YNc(4,Go,1,0,"ng-template",null,27,o.W1O),o.qZA()),2&n){const t=o.MAs(5),r=o.oxw();o.xp6(3),o.Q6J("ngIf",r.dataLoaded)("ngIfElse",t)}}const qo=function(){return{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!0}};let Bo=(()=>{class n{constructor(t,r,i,s,a,c,u,d,f){this.route=t,this.funkosService=r,this.cartService=i,this.apiTolkienService=s,this.loginService=a,this.cartLocalService=c,this.apiPotterService=u,this.apiStarWarsService=d,this.apiPokemonService=f,this.isAuthenticated=!1,this.stock=0,this.dataLoaded=!1,this.loginService.authStateObservable()?.subscribe(p=>{this.isAuthenticated=!!p})}ngOnInit(){this.route.params.subscribe(t=>{this.getItemById(t.id)}),this.funkosService.stockFunkoSubject$.subscribe(t=>{this.stock=t})}ngAfterViewInit(){this.addButton&&this.subtractButton&&this.quantityButton&&(this.addButton.nativeElement.addEventListener("click",()=>this.handleAddClick()),this.subtractButton.nativeElement.addEventListener("click",()=>this.handleSubtractClick()))}handleAddClick(){this.updateQuantity(1)}handleSubtractClick(){this.updateQuantity(-1)}updateQuantity(t){if(this.quantityButton){let r=this.quantityButton.nativeElement.value;""===r||isNaN(r)?r="0":(r=(parseInt(r)+t).toString(),parseInt(r)<0?r="0":this.stock&&parseInt(r)>this.stock&&(r=this.stock)),this.quantityButton.nativeElement.value=r}}getItemById(t){var r=this;return(0,l.Z)(function*(){try{if(r.dataLoaded=!1,r.selectedItem=yield r.funkosService.getFunko(t),r.selectedItemLicence=r.selectedItem?.licence,r.stock=r.selectedItem?.stock,r.funkosService.emitirStockInicial(r.selectedItem?.stock||0),r.selectedItem&&r.selectedItem.name)if("The Lord of the Rings"===r.selectedItem.licence){const i=yield r.apiTolkienService.getCharacterInfo(r.selectedItem.name);i&&i.docs&&i.docs.length>0?(r.characterInfo=i.docs[0],r.dataLoaded=!0):0===i.docs.length&&(r.characterInfo=void 0,r.dataLoaded=!0)}else if("Harry Potter"===r.selectedItem.licence){const i=yield r.apiPotterService.getCharacterInfo(r.selectedItem.name);i?(r.characterInfoPotter=i,r.dataLoaded=!0):(r.characterInfoPotter=void 0,r.dataLoaded=!0)}else if("Star Wars"===r.selectedItem.licence){const i=yield r.apiStarWarsService.getCharacterInfo(r.selectedItem.name);i?(r.characterInfoStarWars=i,r.dataLoaded=!0):(r.characterInfoStarWars=void 0,r.dataLoaded=!0)}else if("Pokemon"===r.selectedItem.licence){const i=yield r.apiPokemonService.getPokemon(r.selectedItem.id);i?(r.characterInfoPokemon=i,r.dataLoaded=!0):(r.characterInfoPokemon=void 0,r.dataLoaded=!0)}return r.selectedItem}catch(i){return void console.log(i)}})()}addToCart(){var t=this;return(0,l.Z)(function*(){if(t.selectedItem&&t.quantityButton){const r=parseInt(t.quantityButton.nativeElement.value);if(r>0&&t.selectedItem.id){if(t.isAuthenticated)t.selectedItem.stock&&t.selectedItem.stock>0&&t.selectedItem.stock>r?(t.cartService.agregarAlCarrito(t.selectedItem.id,r),t.funkosService.emitirStockInicial(t.stock?t.stock-r:0)):alert("No hay stock suficiente");else if(t.selectedItem.stock&&t.selectedItem.stock>0&&t.selectedItem.stock>=r){yield t.cartLocalService.addToCart({funkoId:t.selectedItem.id,quantity:r});const i=t.stock?t.stock-r:0;t.funkosService.emitirStockInicial(i),t.funkosService.actualizarStockFunko(t.selectedItem.id,i)}t.quantityButton.nativeElement.value="0"}}})()}static#e=this.\u0275fac=function(r){return new(r||n)(o.Y36(m.gz),o.Y36(B.E),o.Y36(Rr),o.Y36(Io),o.Y36(Qe.r),o.Y36(xr),o.Y36(To),o.Y36(Ao),o.Y36(Eo))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-item"]],viewQuery:function(r,i){if(1&r&&(o.Gf(Po,5),o.Gf(bo,5),o.Gf(ko,5)),2&r){let s;o.iGM(s=o.CRH())&&(i.addButton=s.first),o.iGM(s=o.CRH())&&(i.subtractButton=s.first),o.iGM(s=o.CRH())&&(i.quantityButton=s.first)}},decls:32,vars:12,consts:[[1,"main","item-container"],[1,"item"],[1,"item-picture"],[1,"item-img-front",3,"src"],[1,"item-img-back",3,"src"],[1,"item-info"],[1,"item-name"],[1,"item-serie"],[1,"item-license"],[1,"item-price"],[1,"item-cart"],[1,"item-cart-quantity"],["id","subtract",1,"button","item-cart-quantity-btn"],["subtractButton",""],["type","text","id","quantity","value","0","disabled","",1,"item-input"],["quantityButton",""],["id","add",1,"button","item-cart-quantity-btn"],["addButton",""],[1,"item-stock"],[1,"button",3,"click"],["class","item-info-extra",4,"ngIf"],["class","item-info-extra harry-potter-info",4,"ngIf"],["class","item-info-extra star-wars-info",4,"ngIf"],["class","item-info-extra pokemon-info",4,"ngIf"],[1,"item-info-extra"],[1,"item-info-extra-title"],[4,"ngIf","ngIfElse"],["loading",""],[4,"ngIf"],["target","_blank",3,"href"],["src","../../../../assets/img/spinner.svg","alt","Loading spinner",1,"spinner"],[1,"item-info-extra","harry-potter-info"],[3,"src",4,"ngIf"],[3,"src"],["src","../../../../assets/img/spinner.svg","alt","Loading Spinner",1,"spinner"],[1,"item-info-extra","star-wars-info"],[1,"item-info-extra","pokemon-info"]],template:function(r,i){1&r&&(o.TgZ(0,"main",0)(1,"article",1)(2,"picture",2),o._UZ(3,"img",3)(4,"img",4),o.qZA(),o.TgZ(5,"section",5)(6,"h3",6),o._uU(7),o.qZA(),o.TgZ(8,"p",7),o._uU(9),o.qZA(),o.TgZ(10,"p",8),o._uU(11),o.qZA(),o.TgZ(12,"p",9),o._uU(13),o.qZA(),o.TgZ(14,"div",10)(15,"div",11)(16,"button",12,13),o._uU(18,"-"),o.qZA(),o._UZ(19,"input",14,15),o.TgZ(21,"button",16,17),o._uU(23,"+"),o.qZA(),o.TgZ(24,"p",18),o._uU(25),o.qZA()(),o.TgZ(26,"button",19),o.NdJ("click",function(){return i.addToCart()}),o._uU(27,"AGREGAR"),o.qZA()()(),o.YNc(28,Ro,6,2,"section",20),o.YNc(29,Do,6,2,"section",21),o.YNc(30,Zo,6,2,"section",22),o.YNc(31,Vo,6,2,"section",23),o.qZA()()),2&r&&(o.xp6(3),o.s9C("src",null==i.selectedItem?null:i.selectedItem.front_image,o.LSH),o.xp6(1),o.s9C("src",null==i.selectedItem?null:i.selectedItem.back_image,o.LSH),o.xp6(3),o.Oqu(null==i.selectedItem?null:i.selectedItem.name),o.xp6(2),o.Oqu(null==i.selectedItem?null:i.selectedItem.serie),o.xp6(2),o.hij("",null==i.selectedItem?null:i.selectedItem.licence," "),o.xp6(2),o.hij("$",null==i.selectedItem||null==i.selectedItem.price?null:i.selectedItem.price.toLocaleString("es",o.DdM(11,qo)),""),o.xp6(12),o.hij("Disponibles: ",i.stock,""),o.xp6(3),o.Q6J("ngIf","The Lord of the Rings"==i.selectedItemLicence),o.xp6(1),o.Q6J("ngIf","Harry Potter"==i.selectedItemLicence),o.xp6(1),o.Q6J("ngIf","Star Wars"==i.selectedItemLicence),o.xp6(1),o.Q6J("ngIf","Pokemon"==i.selectedItemLicence))},dependencies:[W.O5],styles:[".item-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:2rem}@media screen and (min-width: 992px){.item-container[_ngcontent-%COMP%]{min-height:60vh;flex-direction:row;margin:6rem}}.item[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:4rem}@media screen and (min-width: 992px){.item[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start}}.item-picture[_ngcontent-%COMP%]{width:100%;display:block}@media screen and (min-width: 992px){.item-picture[_ngcontent-%COMP%]{width:30%;flex-direction:row}}.item-picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:50vh;object-fit:contain;animation:_ngcontent-%COMP%_fade 2s ease-in-out}@keyframes _ngcontent-%COMP%_fade{0%{opacity:0}to{opacity:1}}.item-img-back[_ngcontent-%COMP%], .item-picture[_ngcontent-%COMP%]:hover   .item-img-front[_ngcontent-%COMP%]{display:none}.item-picture[_ngcontent-%COMP%]:hover   .item-img-back[_ngcontent-%COMP%]{display:block}.item-info[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:2rem;position:relative}@media screen and (min-width: 992px){.item-info[_ngcontent-%COMP%]{width:30%;align-items:flex-start}}.item-name[_ngcontent-%COMP%]{font-size:var(--font-large);font-weight:1000;text-align:center}@media screen and (min-width: 768px){.item-name[_ngcontent-%COMP%]{font-size:var(--font-xlarge)}}.item-serie[_ngcontent-%COMP%]{font-size:var(--font-medium);font-weight:500}@media screen and (min-width: 768px){.item-serie[_ngcontent-%COMP%]{font-size:var(--font-large)}}.item-license[_ngcontent-%COMP%]{font-size:var(--font-small);font-weight:500}@media screen and (min-width: 768px){.item-license[_ngcontent-%COMP%]{font-size:var(--font-medium)}}.item-price[_ngcontent-%COMP%]{font-size:var(--font-medium);font-weight:500}@media screen and (min-width: 768px){.item-price[_ngcontent-%COMP%]{font-size:var(--font-large)}}.item-info-extra[_ngcontent-%COMP%]{width:100%;display:flex;padding:2rem;border:.2rem solid var(--primary);border-radius:.5rem;flex-direction:column;word-wrap:break-word;margin:0 auto}@media screen and (min-width: 768px){.item-info-extra[_ngcontent-%COMP%]{width:60%}}@media screen and (min-width: 992px){.item-info-extra[_ngcontent-%COMP%]{width:30%}}.item-info-extra-title[_ngcontent-%COMP%]{font-size:var(--font-medium);font-weight:500;color:var(--primary);text-align:center;margin-bottom:2rem}.item-info-extra[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--font-xsmall);color:var(--dark-font);margin:1rem 0}.item-info-extra[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--secondary);text-decoration:underline}.harry-potter-info[_ngcontent-%COMP%]{position:relative!important;display:flex;align-items:center}.harry-potter-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inline-block;width:10rem;border-radius:1.2rem}.star-wars-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:1.2rem}.star-wars-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .pokemon-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify}"]})}return n})(),zo=(()=>{class n{constructor(t,r){this.funkoService=t,this.activatedRoute=r,this.title="PRODUCTOS RELACIONADOS",this.obtenerIdItem()}obtenerIdItem(){var t=this;this.activatedRoute.paramMap.subscribe(function(){var r=(0,l.Z)(function*(i){window.scroll(0,0);let s=i.get("id");const a=yield t.funkoService.getFunko(parseInt(s||""));t.selectedItemLicence=a?.licence});return function(i){return r.apply(this,arguments)}}())}static#e=this.\u0275fac=function(r){return new(r||n)(o.Y36(B.E),o.Y36(m.gz))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-item-page"]],decls:4,vars:2,consts:[[3,"title","filtroLista"]],template:function(r,i){1&r&&o._UZ(0,"app-header")(1,"app-item")(2,"app-slider",0)(3,"app-footer"),2&r&&(o.xp6(2),o.Q6J("title",i.title)("filtroLista",i.selectedItemLicence))},dependencies:[ce.G,ue.c,vo.P,Bo]})}return n})();var $o=g(3519),Ho=g.n($o);const jo=function(){return{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!0}};function Ko(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"li",9)(1,"div",10)(2,"picture",11),o._UZ(3,"img",12),o.qZA(),o.TgZ(4,"article",13)(5,"p",14),o._uU(6),o.qZA(),o.TgZ(7,"p",15),o._uU(8),o.qZA(),o.TgZ(9,"p",16),o._uU(10),o.qZA()()(),o.TgZ(11,"div",17)(12,"button",18),o.NdJ("click",function(){const s=o.CHM(t).$implicit,a=o.oxw();return o.KtG(a.decreaseQuantity(s))}),o._uU(13,"-"),o.qZA(),o._UZ(14,"input",19,20),o.TgZ(16,"button",21),o.NdJ("click",function(){const s=o.CHM(t).$implicit,a=o.oxw();return o.KtG(a.increaseQuantity(s))}),o._uU(17,"+"),o.qZA(),o.TgZ(18,"p",22),o._uU(19),o.qZA()(),o.TgZ(20,"div",23)(21,"p"),o._uU(22),o.qZA()(),o.TgZ(23,"div")(24,"img",24),o.NdJ("click",function(){const s=o.CHM(t).$implicit,a=o.oxw();return o.KtG(a.removeItem(s))}),o.qZA()()()}if(2&n){const t=e.$implicit,r=o.oxw();o.xp6(3),o.s9C("alt",t.name),o.Q6J("src",t.front_image,o.LSH),o.xp6(3),o.Oqu(t.name),o.xp6(2),o.Oqu(t.serie),o.xp6(2),o.Oqu(t.licence),o.xp6(4),o.Q6J("value",t.quantity),o.xp6(5),o.hij("Disponibles: ",t.stock,""),o.xp6(3),o.hij("$",r.calculateTotalPrice(t).toLocaleString("es",o.DdM(8,jo)),"")}}let Jo=(()=>{class n{constructor(t,r,i,s){this.cartService=t,this.funkoService=r,this.loginService=i,this.cartLocalService=s,this.cartItems=[],this.cartItemsCopy=[],this.cartItemsId=[],this.totalQuantity=new be.X(0),this.totalPrice=new be.X(0)}ngOnInit(){var t=this;this.loginService.authStateObservable()?.subscribe(function(){var r=(0,l.Z)(function*(i){i?(t.user=t.loginService.authStateObservable(),yield t.obtenerCart(i.id?.toString()??""),t.obtenerTotalPrice(),yield t.loadFunkoDetails()):(t.user=void 0,t.cartItems=[],t.cartItems=yield t.cartLocalService.getCart(),yield t.loadFunkoDetails())});return function(i){return r.apply(this,arguments)}}()),this.cartLocalService.cartSubject.subscribe(function(){var r=(0,l.Z)(function*(i){if(null==t.user){t.cartItems=i,yield t.loadFunkoDetails(),t.obtenerTotalPrice();const s=t.cartItems.reduce((a,c)=>a+c.quantity,0);t.totalQuantity.next(s)}});return function(i){return r.apply(this,arguments)}}()),this.cartService.cartSubject.subscribe(function(){var r=(0,l.Z)(function*(i){const s=i;t.cartItems=[],s.forEach(c=>{t.cartItems.push({funkoId:c.id_funko,quantity:c.cantidad}),t.cartItemsId.push(c.id_funko)});const a=t.cartItems.reduce((c,u)=>c+u.quantity,0);t.totalQuantity.next(a),t.obtenerTotalPrice()});return function(i){return r.apply(this,arguments)}}())}obtenerCart(t){var r=this;return(0,l.Z)(function*(){const i=yield r.cartService.obtenerCarritoDeCompras(parseInt(t));return i&&(r.cart=i[0].id_cart,i.forEach(a=>{r.cartItems.push({funkoId:a.id_funko,quantity:a.cantidad}),r.cartItemsId.push(a.id_funko)}),yield r.loadFunkoDetails()),null})()}obtenerTotalPrice(){let t=0;for(const r of this.cartItemsCopy)t+=r.price*r.quantity;this.totalPrice.next(t)}loadFunkoDetails(){var t=this;return(0,l.Z)(function*(){t.cartItemsCopy=[];const r=new Map;for(const i of t.cartItems)try{const s=yield t.funkoService.getFunko(i.funkoId);if(s){const a={...s,quantity:i.quantity};r.set(i.funkoId,a)}else console.log("Item not found:",i)}catch(s){console.error("Error loading details for item:",i,s)}t.cartItemsCopy=Array.from(r.values())})()}increaseQuantity(t){var r=this;return(0,l.Z)(function*(){r.loginService.authStateObservable()?.subscribe(function(){var i=(0,l.Z)(function*(s){if(s){const a=s.id||0,c=t.quantity+1;yield r.funkoService.actualizarStock(t.id,t.stock-1),t.stock--,yield r.cartService.actualizarCantidades(a,r.cart.id,t.id,c),t.quantity=c,r.obtenerTotalPrice()}else r.cartLocalService.updateCartItem({funkoId:t.id,quantity:t.quantity+1}),t.quantity++,yield r.funkoService.actualizarStock(t.id,t.stock-1),t.stock--,r.totalQuantity.next(r.totalQuantity.value+1),r.obtenerTotalPrice()});return function(s){return i.apply(this,arguments)}}())})()}decreaseQuantity(t){var r=this;return(0,l.Z)(function*(){t.quantity>0&&r.loginService.authStateObservable()?.subscribe(function(){var i=(0,l.Z)(function*(s){if(s){const a=s.id||0,c=t.quantity-1;yield r.funkoService.actualizarStock(t.id,t.stock+1),t.stock++,yield r.cartService.actualizarCantidades(a,r.cart.id,t.id,c),t.quantity=c,r.obtenerTotalPrice()}else r.cartLocalService.updateCartItem({funkoId:t.id,quantity:t.quantity+1}),t.quantity--,yield r.funkoService.actualizarStock(t.id,t.stock+1),t.stock++,r.totalQuantity.next(r.totalQuantity.value-1),r.obtenerTotalPrice()});return function(s){return i.apply(this,arguments)}}())})()}calculateTotalPrice(t){return t.price*t.quantity}removeItem(t){var r=this;Ho().fire({text:"\xbfEst\xe1 seguro de eliminar este producto?",icon:"warning",showCancelButton:!0,confirmButtonText:"ELIMINAR",cancelButtonText:"CANCELAR"}).then(function(){var i=(0,l.Z)(function*(s){s.isConfirmed&&(r.user?r.loginService.authStateObservable()?.subscribe(function(){var a=(0,l.Z)(function*(c){if(c){const u=c.id||0;(yield r.cartService.eliminarDelCarrito(t.id,u))&&(r.cartItems=r.cartItems.filter(f=>f.funkoId!==t.id)),yield r.loadFunkoDetails()}});return function(c){return a.apply(this,arguments)}}()):(r.cartLocalService.removeFromCart(t.id),r.cartItems=r.cartItems.filter(a=>a!==t)))});return function(s){return i.apply(this,arguments)}}())}getTotalQuantity(){return this.totalQuantity}static#e=this.\u0275fac=function(r){return new(r||n)(o.Y36(Rr),o.Y36(B.E),o.Y36(Qe.r),o.Y36(xr))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-cart"]],decls:34,vars:10,consts:[[1,"main","cart-main"],[1,"h1"],[1,"cart-items"],["class","cart-item",4,"ngFor","ngForOf"],[1,"cart-resumen"],[1,"cart-resumen-title"],[1,"cart-resumen-container"],[1,"cart-resumen-line"],["href","./checkout.html",1,"button","cart-pay-btn"],[1,"cart-item"],[1,"cart-item-info"],[1,"cart-item-picture"],[3,"src","alt"],[1,"cart-item-content"],[1,"cart-item-name"],[1,"cart-item-serie"],[1,"cart-item-license"],[1,"item-cart-quantity"],["id","subtract",1,"button","item-cart-quantity-btn",3,"click"],["type","text","id","quantity","placeholder","1",1,"item-input",3,"value"],["quantityButton",""],["id","add",1,"button","item-cart-quantity-btn",3,"click"],[1,"item-stock"],[1,"cart-total-price"],["src","../../../../assets/img/close-icon.svg",1,"cart-item-delete",3,"click"]],template:function(r,i){1&r&&(o.TgZ(0,"main",0)(1,"h1",1),o._uU(2,"CARRITO DE COMPRAS"),o.qZA(),o.TgZ(3,"ul",2),o.YNc(4,Ko,25,9,"li",3),o.qZA(),o.TgZ(5,"section",4)(6,"h2",5),o._uU(7,"RESUMEN"),o.qZA(),o.TgZ(8,"article",6)(9,"div",7)(10,"p"),o._uU(11,"PRODUCTOS"),o.qZA(),o.TgZ(12,"p"),o._uU(13),o.ALo(14,"async"),o.qZA()(),o.TgZ(15,"div",7)(16,"p"),o._uU(17,"SUBTOTAL"),o.qZA(),o.TgZ(18,"p"),o._uU(19),o.ALo(20,"async"),o.qZA()(),o.TgZ(21,"div",7)(22,"p"),o._uU(23,"ENV\xcdO"),o.qZA(),o.TgZ(24,"p"),o._uU(25,"$0,00"),o.qZA()(),o.TgZ(26,"div",7)(27,"p"),o._uU(28,"TOTAL"),o.qZA(),o.TgZ(29,"p"),o._uU(30),o.ALo(31,"async"),o.qZA()()(),o.TgZ(32,"a",8),o._uU(33,"PAGAR"),o.qZA()()()),2&r&&(o.xp6(4),o.Q6J("ngForOf",i.cartItemsCopy),o.xp6(9),o.Oqu(o.lcZ(14,4,i.totalQuantity)),o.xp6(6),o.hij("$",o.lcZ(20,6,i.totalPrice),""),o.xp6(11),o.hij("$",o.lcZ(31,8,i.totalPrice),""))},dependencies:[W.sg,W.Ov],styles:[".cart-main[_ngcontent-%COMP%]{display:grid}.cart-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.cart-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:2rem;padding:3rem;border:.2rem solid var(--primary);border-radius:.5rem}@media screen and (min-width: 992px){.cart-item[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-around;align-items:center;gap:0}}.cart-item-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}@media screen and (min-width: 768px){.cart-item-info[_ngcontent-%COMP%]{flex-direction:row}}.cart-item-picture[_ngcontent-%COMP%]{width:15rem;height:15rem}.cart-item-picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;object-fit:contain}.cart-item-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;padding:2rem}@media screen and (min-width: 992px){.cart-item-content[_ngcontent-%COMP%]{width:25vw;align-items:flex-start}}.cart-item-name[_ngcontent-%COMP%]{font-size:var(--font-medium);font-weight:1000;align-self:center}@media screen and (min-width: 768px){.cart-item-name[_ngcontent-%COMP%]{font-size:var(--font-large);align-self:flex-start}}.cart-item-serie[_ngcontent-%COMP%]{font-size:var(--font-small);font-weight:500;align-self:center}@media screen and (min-width: 992px){.cart-item-serie[_ngcontent-%COMP%]{font-size:var(--font-medium);align-self:flex-start}}.cart-item-license[_ngcontent-%COMP%]{font-size:var(--font-xsmall);font-weight:500;align-self:center}@media screen and (min-width: 768px){.cart-item-license[_ngcontent-%COMP%]{font-size:var(--font-small);align-self:flex-start}}.cart-total-price[_ngcontent-%COMP%]{font-size:var(--font-medium);font-weight:500;margin-top:3rem}@media screen and (min-width: 768px){.cart-total-price[_ngcontent-%COMP%]{font-size:var(--font-large)}}@media screen and (min-width: 992px){.cart-total-price[_ngcontent-%COMP%]{width:10vw;text-align:end;margin-top:0}}.cart-item-delete[_ngcontent-%COMP%]{width:3rem;height:3rem;cursor:pointer;margin:1rem}.cart-resumen[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:space-around;gap:2rem;margin:2rem auto}@media screen and (min-width: 768px){.cart-resumen[_ngcontent-%COMP%]{width:50%}}@media screen and (min-width: 992px){.cart-resumen[_ngcontent-%COMP%]{justify-self:flex-end;margin:2rem 0}}.cart-resumen-title[_ngcontent-%COMP%]{font-size:var(--font-medium);font-weight:500;text-align:center}@media screen and (min-width: 768px){.cart-resumen-title[_ngcontent-%COMP%]{font-size:var(--font-large)}}.cart-resumen-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:3rem;border:.2rem solid var(--primary);border-radius:.5rem}.cart-resumen-line[_ngcontent-%COMP%]{font-size:var(--font-xsmall);display:flex;justify-content:space-between;gap:2rem}@media screen and (min-width: 768px){.cart-resumen-line[_ngcontent-%COMP%]{font-size:var(--font-small)}}.cart-resumen-line[_ngcontent-%COMP%]:nth-of-type(4){border-top:.2rem solid var(--primary);padding-top:1rem}.cart-pay-btn[_ngcontent-%COMP%]{align-self:center;max-width:50%}"]})}return n})();const Yo=[{path:"",component:yo},{path:"cart",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-cart-page"]],decls:3,vars:0,template:function(r,i){1&r&&o._UZ(0,"app-header")(1,"app-cart")(2,"app-footer")},dependencies:[ce.G,ue.c,Jo]})}return n})()},{path:":id",component:zo}];let Qo=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=o.oAB({type:n});static#n=this.\u0275inj=o.cJS({imports:[m.Bz.forChild(Yo),m.Bz]})}return n})();var Xo=g(5191);const Nr=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},Mr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,c=a?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0;let T=(15&c)<<2|d>>6,S=63&d;u||(S=64,a||(T=64)),r.push(t[s>>2],t[(3&s)<<4|c>>4],t[T],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Nr(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==c||null==d||null==p)throw new rs;r.push(s<<2|c>>4),64!==d&&(r.push(c<<4&240|d>>2),64!==p&&r.push(d<<6&192|p))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class rs extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ke=function(n){return function(n){const e=Nr(n);return Mr.encodeByteArray(e,!0)}(n).replace(/\./g,"")},Se=function(n){try{return Mr.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function k(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class z extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,z.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,le.prototype.create)}}class le{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?function vs(n,e){return n.replace(Is,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new z(i,`${this.serviceName}: ${a} (${i}).`,r)}}const Is=/\{\$([^}]+)}/g;function Wr(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class As{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function Es(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=tt),void 0===i.error&&(i.error=tt),void 0===i.complete&&(i.complete=tt);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tt(){}function Oe(n){return n&&n._delegate?n._delegate:n}class ne{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const rt=[];var y=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(y||{});const Gr={debug:y.DEBUG,verbose:y.VERBOSE,info:y.INFO,warn:y.WARN,error:y.ERROR,silent:y.SILENT},Ns=y.INFO,Ms={[y.DEBUG]:"log",[y.VERBOSE]:"log",[y.INFO]:"info",[y.WARN]:"warn",[y.ERROR]:"error"},Ds=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=Ms[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class Vr{constructor(e){this.name=e,this._logLevel=Ns,this._logHandler=Ds,this._userLogHandler=null,rt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in y))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Gr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,y.DEBUG,...e),this._logHandler(this,y.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,y.VERBOSE,...e),this._logHandler(this,y.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,y.INFO,...e),this._logHandler(this,y.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,y.WARN,...e),this._logHandler(this,y.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,y.ERROR,...e),this._logHandler(this,y.ERROR,...e)}}const Ls=(n,e)=>e.some(t=>n instanceof t);let qr,Br;const zr=new WeakMap,it=new WeakMap,$r=new WeakMap,ot=new WeakMap,st=new WeakMap;let at={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return it.get(n);if("objectStoreNames"===e)return n.objectStoreNames||$r.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return G(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function qs(n){return"function"==typeof n?function Vs(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Fs(){return Br||(Br=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(ct(this),e),G(zr.get(this))}:function(...e){return G(n.apply(ct(this),e))}:function(e,...t){const r=n.call(ct(this),e,...t);return $r.set(r,e.sort?e.sort():[e]),G(r)}}(n):(n instanceof IDBTransaction&&function Ws(n){if(it.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});it.set(n,e)}(n),Ls(n,function Us(){return qr||(qr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,at):n)}function G(n){if(n instanceof IDBRequest)return function Zs(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(G(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&zr.set(t,n)}).catch(()=>{}),st.set(e,n),e}(n);if(ot.has(n))return ot.get(n);const e=qs(n);return e!==n&&(ot.set(n,e),st.set(e,n)),e}const ct=n=>st.get(n),zs=["get","getKey","getAll","getAllKeys","count"],$s=["put","add","delete","clear"],ut=new Map;function Hr(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(ut.get(e))return ut.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=$s.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!zs.includes(t))return;const s=function(){var a=(0,l.Z)(function*(c,...u){const d=this.transaction(c,i?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(u.shift())),(yield Promise.all([f[t](...u),i&&d.done]))[0]});return function(u){return a.apply(this,arguments)}}();return ut.set(e,s),s}!function Gs(n){at=n(at)}(n=>({...n,get:(e,t,r)=>Hr(e,t)||n.get(e,t,r),has:(e,t)=>!!Hr(e,t)||n.has(e,t)}));class Hs{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function js(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const lt="@firebase/app",H=new Vr("@firebase/app"),Ia={[lt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},j=new Map,xe=new Map;function Ta(n,e){try{n.container.addComponent(e)}catch(t){H.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function de(n){const e=n.name;if(xe.has(e))return H.debug(`There were multiple attempts to register component ${e}.`),!1;xe.set(e,n);for(const t of j.values())Ta(t,n);return!0}const D=new le("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."}),dt="10.5.2";function K(n,e,t){var r;let i=null!==(r=Ia[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const c=[`Unable to register library "${i}" with version "${e}":`];return s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void H.warn(c.join(" "))}de(new ne(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Sa="firebase-heartbeat-database",Ca=1,he="firebase-heartbeat-store";let ft=null;function Jr(){return ft||(ft=function Bs(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),c=G(a);return r&&a.addEventListener("upgradeneeded",u=>{r(G(a.result),u.oldVersion,u.newVersion,G(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}(Sa,Ca,{upgrade:(n,e)=>{0===e&&n.createObjectStore(he)}}).catch(n=>{throw D.create("idb-open",{originalErrorMessage:n.message})})),ft}function pt(){return(pt=(0,l.Z)(function*(n){try{return yield(yield Jr()).transaction(he).objectStore(he).get(Qr(n))}catch(e){if(e instanceof z)H.warn(e.message);else{const t=D.create("idb-get",{originalErrorMessage:e?.message});H.warn(t.message)}}})).apply(this,arguments)}function Yr(n,e){return mt.apply(this,arguments)}function mt(){return(mt=(0,l.Z)(function*(n,e){try{const r=(yield Jr()).transaction(he,"readwrite");yield r.objectStore(he).put(e,Qr(n)),yield r.done}catch(t){if(t instanceof z)H.warn(t.message);else{const r=D.create("idb-set",{originalErrorMessage:t?.message});H.warn(r.message)}}})).apply(this,arguments)}function Qr(n){return`${n.name}!${n.options.appId}`}class xa{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ma(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,l.Z)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Xr();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,l.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=Xr(),{heartbeatsToSend:r,unsentEntries:i}=function Na(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),ei(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),ei(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=ke(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function Xr(){return(new Date).toISOString().substring(0,10)}class Ma{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!function _s(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function gs(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,l.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function wa(n){return pt.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,l.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return Yr(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,l.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return Yr(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function ei(n){return ke(JSON.stringify({version:2,heartbeats:n})).length}!function Da(n){de(new ne("platform-logger",e=>new Hs(e),"PRIVATE")),de(new ne("heartbeat",e=>new xa(e),"PRIVATE")),K(lt,"0.9.22",n),K(lt,"0.9.22","esm2017"),K("fire-js","")}(""),K("firebase","10.5.2","app");const Fa=new o.GfV("ANGULARFIRE2_VERSION"),ti=(n,e)=>{const t=e?[e]:function Kr(){return Array.from(j.values())}(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r};var ni=g(7582);const Ja=function ri(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ii=new le("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Me=new Vr("@firebase/auth");function De(n,...e){Me.logLevel<=y.ERROR&&Me.error(`Auth (${dt}): ${n}`,...e)}function P(n,...e){throw gt(n,...e)}function x(n,...e){return gt(n,...e)}function gt(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ii.create(n,...e)}function h(n,e,...t){if(!n)throw gt(e,...t)}function N(n){const e="INTERNAL ASSERTION FAILED: "+n;throw De(e),new Error(e)}function V(n,e){n||N(e)}function si(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}function Qa(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function yt(){return"http:"===si()||"https:"===si()}()||function ps(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()||"connection"in navigator))||navigator.onLine}class pe{constructor(e,t){this.shortDelay=e,this.longDelay=t,V(t>e,"Short delay should be less than long delay!"),this.isMobile=function hs(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(k())}()||function ms(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return Qa()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class ai{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void N("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void N("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void N("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ec={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},tc=new pe(3e4,6e4);function I(n,e,t,r){return It.apply(this,arguments)}function It(){return(It=(0,l.Z)(function*(n,e,t,r,i={}){return ci(n,i,(0,l.Z)(function*(){let s={},a={};r&&("GET"===e?a=r:s={body:JSON.stringify(r)});const c=Wr(Object.assign({key:n.config.apiKey},a)).slice(1),u=yield n._getAdditionalHeaders();return u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode),ai.fetch()(ui(n,n.config.apiHost,t,c),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function ci(n,e,t){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,l.Z)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ec),e);try{const i=new rc(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=yield s.json();if("needConfirmation"in a)throw me(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw me(n,"credential-already-in-use",a);if("EMAIL_EXISTS"===u)throw me(n,"email-already-in-use",a);if("USER_DISABLED"===u)throw me(n,"user-disabled",a);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw function oi(n,e,t){const r=Object.assign(Object.assign({},Ja()),{[e]:t});return new le("auth","Firebase",r).create(e,{appName:n.name})}(n,f,d);P(n,f)}}catch(i){if(i instanceof z)throw i;P(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function ui(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?function vt(n,e){V(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}(n.config,i):`${n.config.apiScheme}://${i}`}class rc{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(x(this.auth,"network-request-failed")),tc.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function me(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=x(n,e,r);return i.customData._tokenResponse=t,i}function bt(){return(bt=(0,l.Z)(function*(n,e){return I(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function St(){return(St=(0,l.Z)(function*(n,e){return I(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function _e(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Ct(){return(Ct=(0,l.Z)(function*(n,e=!1){const t=Oe(n),r=yield t.getIdToken(e),i=Le(r);h(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:_e(wt(i.auth_time)),issuedAtTime:_e(wt(i.iat)),expirationTime:_e(wt(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function wt(n){return 1e3*Number(n)}function Le(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return De("JWT malformed, contained fewer than 3 sections"),null;try{const i=Se(t);return i?JSON.parse(i):(De("Failed to decode base64 JWT payload"),null)}catch(i){return De("Caught error parsing JWT payload as JSON",i?.toString()),null}}function U(n,e){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,l.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof z&&function lc({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class dc{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,l.Z)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,l.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class pi{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_e(this.lastLoginAt),this.creationTime=_e(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ge(n){return Rt.apply(this,arguments)}function Rt(){return Rt=(0,l.Z)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield U(n,function ac(n,e){return St.apply(this,arguments)}(t,{idToken:r}));h(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function pc(n){return n.map(e=>{var{providerId:t}=e,r=(0,ni._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],c=function fc(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,a),f=!!n.isAnonymous&&!(n.email&&s.passwordHash||c?.length),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new pi(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,p)}),Rt.apply(this,arguments)}function xt(){return(xt=(0,l.Z)(function*(n){const e=Oe(n);yield ge(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function Nt(){return(Nt=(0,l.Z)(function*(n,e){const t=yield ci(n,{},(0,l.Z)(function*(){const r=Wr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=ui(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",ai.fetch()(a,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class ye{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){h(e.idToken,"internal-error"),h(typeof e.idToken<"u","internal-error"),h(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function uc(n){const e=Le(n);return h(e,"internal-error"),h(typeof e.exp<"u","internal-error"),h(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,l.Z)(function*(){return h(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,l.Z)(function*(){const{accessToken:i,refreshToken:s,expiresIn:a}=yield function mc(n,e){return Nt.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(a))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new ye;return r&&(h("string"==typeof r,"internal-error",{appName:e}),a.refreshToken=r),i&&(h("string"==typeof i,"internal-error",{appName:e}),a.accessToken=i),s&&(h("number"==typeof s,"internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ye,this.toJSON())}_performRefresh(){return N("not implemented")}}function q(n,e){h("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Y{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=(0,ni._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new pi(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,l.Z)(function*(){const r=yield U(t,t.stsTokenManager.getToken(t.auth,e));return h(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function cc(n){return Ct.apply(this,arguments)}(this,e)}reload(){return function hc(n){return xt.apply(this,arguments)}(this)}_assign(e){this!==e&&(h(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Y(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){h(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,l.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield ge(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,l.Z)(function*(){const t=yield e.getIdToken();return yield U(e,function oc(n,e){return bt.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,c,u,d,f;const p=null!==(r=t.displayName)&&void 0!==r?r:void 0,T=null!==(i=t.email)&&void 0!==i?i:void 0,S=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,ae=null!==(a=t.photoURL)&&void 0!==a?a:void 0,uo=null!==(c=t.tenantId)&&void 0!==c?c:void 0,Sr=null!==(u=t._redirectEventId)&&void 0!==u?u:void 0,lo=null!==(d=t.createdAt)&&void 0!==d?d:void 0,ho=null!==(f=t.lastLoginAt)&&void 0!==f?f:void 0,{uid:Cr,emailVerified:fo,isAnonymous:po,providerData:wr,stsTokenManager:mo}=t;h(Cr&&mo,e,"internal-error");const Ml=ye.fromJSON(this.name,mo);h("string"==typeof Cr,e,"internal-error"),q(p,e.name),q(T,e.name),h("boolean"==typeof fo,e,"internal-error"),h("boolean"==typeof po,e,"internal-error"),q(S,e.name),q(ae,e.name),q(uo,e.name),q(Sr,e.name),q(lo,e.name),q(ho,e.name);const Or=new Y({uid:Cr,auth:e,email:T,emailVerified:fo,displayName:p,isAnonymous:po,photoURL:ae,phoneNumber:S,tenantId:uo,stsTokenManager:Ml,createdAt:lo,lastLoginAt:ho});return wr&&Array.isArray(wr)&&(Or.providerData=wr.map(Dl=>Object.assign({},Dl))),Sr&&(Or._redirectEventId=Sr),Or}static _fromIdTokenResponse(e,t,r=!1){return(0,l.Z)(function*(){const i=new ye;i.updateFromServerResponse(t);const s=new Y({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ge(s),s})()}}const mi=new Map;function F(n){V(n instanceof Function,"Expected a class definition");let e=mi.get(n);return e?(V(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,mi.set(n,e),e)}const _i=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(t,r){var i=this;return(0,l.Z)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,l.Z)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,l.Z)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function Ue(n,e,t){return`firebase:${n}:${e}:${t}`}class se{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ue(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ue("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,l.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Y._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,l.Z)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,l.Z)(function*(){if(!t.length)return new se(F(_i),e,r);const i=(yield Promise.all(t.map(function(){var d=(0,l.Z)(function*(f){if(yield f._isAvailable())return f});return function(f){return d.apply(this,arguments)}}()))).filter(d=>d);let s=i[0]||F(_i);const a=Ue(r,e.config.apiKey,e.name);let c=null;for(const d of t)try{const f=yield d._get(a);if(f){const p=Y._fromJSON(e,f);d!==s&&(c=p),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],c&&(yield s._set(a,c.toJSON())),yield Promise.all(t.map(function(){var d=(0,l.Z)(function*(f){if(f!==s)try{yield f._remove(a)}catch{}});return function(f){return d.apply(this,arguments)}}())),new se(s,e,r)):new se(s,e,r)})()}}function gi(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function Ii(n=k()){return/iemobile/i.test(n)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function yi(n=k()){return/firefox\//i.test(n)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function Ai(n=k()){return/blackberry/i.test(n)}(e))return"Blackberry";if(function Ei(n=k()){return/webos/i.test(n)}(e))return"Webos";if(function Mt(n=k()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function vi(n=k()){return/crios\//i.test(n)}(e))&&!e.includes("edge/"))return"Chrome";if(function Ti(n=k()){return/android/i.test(n)}(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function Pi(n,e=[]){let t;switch(n){case"Browser":t=gi(k());break;case"Worker":t=`${gi(k())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${dt}/${r}`}class yc{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,c)=>{try{a(e(s))}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,l.Z)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function Dt(){return(Dt=(0,l.Z)(function*(n,e={}){return I(n,"GET","/v2/passwordPolicy",function v(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}(n,e))})).apply(this,arguments)}class Tc{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=a.minPasswordLength)&&void 0!==t?t:6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),void 0!==a.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),void 0!==a.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),void 0!==a.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),void 0!==a.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(t=u.meetsMinPasswordLength)||void 0===t||t),u.isValid&&(u.isValid=null===(r=u.meetsMaxPasswordLength)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsLowercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(s=u.containsUppercaseLetter)||void 0===s||s),u.isValid&&(u.isValid=null===(a=u.containsNumericCharacter)||void 0===a||a),u.isValid&&(u.isValid=null===(c=u.containsNonAlphanumericCharacter)||void 0===c||c),u}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Ac{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bi(this),this.idTokenSubscription=new bi(this),this.beforeStateQueue=new yc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ii,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=F(t)),this._initializationPromise=this.queue((0,l.Z)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield se.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,l.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,l.Z)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const c=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,u=s?._redirectEventId,d=yield t.tryRedirectSignIn(e);(!c||c===u)&&d?.user&&(s=d.user,a=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{yield t.beforeStateQueue.runMiddleware(s)}catch(c){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(c))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return h(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,l.Z)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,l.Z)(function*(){try{yield ge(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Xa(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,l.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,l.Z)(function*(){const r=e?Oe(e):null;return r&&h(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,l.Z)(function*(){if(!r._deleted)return e&&h(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,l.Z)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,l.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,l.Z)(function*(){yield t.assertedPersistence.setPersistence(F(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,l.Z)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,l.Z)(function*(){const t=yield function vc(n){return Dt.apply(this,arguments)}(e),r=new Tc(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new le("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,l.Z)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,l.Z)(function*(){if(!t.redirectPersistenceManager){const r=e&&F(e)||t._popupRedirectResolver;h(r,t,"argument-error"),t.redirectPersistenceManager=yield se.create(t,[F(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,l.Z)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,l.Z)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,l.Z)(function*(){if(e===t.currentUser)return t.queue((0,l.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(h(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),"function"==typeof t){const u=e.addObserver(t,r,i);return()=>{a=!0,u()}}{const u=e.addObserver(t);return()=>{a=!0,u()}}}directlySetCurrentUser(e){var t=this;return(0,l.Z)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return h(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,l.Z)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return(0,l.Z)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function Ya(n,...e){Me.logLevel<=y.WARN&&Me.warn(`Auth (${dt}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}class bi{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Ts(n,e){const t=new As(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return h(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}(function ki(n){return`__${n}${Math.floor(1e6*Math.random())}`})("rcb"),new pe(3e4,6e4),new pe(2e3,1e4),new pe(3e4,6e4),new pe(5e3,15e3),encodeURIComponent("fac");var io="@firebase/auth";class Al{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,l.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){h(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(()=>{try{return function ss(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Se(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}})(),function Pl(n){de(new ne("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;h(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pi(n)},d=new Ac(r,i,s,u);return function wc(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(F);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),de(new ne("auth-internal",e=>{const t=function A(n){return Oe(n)}(e.getProvider("auth").getImmediate());return new Al(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),K(io,"1.3.2",function El(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),K(io,"1.3.2","esm2017")}("Browser");class br{constructor(e){return e}}const kr=new o.OlP("angularfire2.auth-instances"),Rl={provide:class Cl{constructor(){return ti("auth")}},deps:[[new o.FiY,kr]]},xl={provide:br,useFactory:function wl(n,e){const t=function Za(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(a=>a.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}("auth",n,e);return t&&new br(t)},deps:[[new o.FiY,kr],class Ne{constructor(e){return e}}]};let co=(()=>{class n{constructor(){K("angularfire",Fa.full,"auth")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=o.oAB({type:n});static \u0275inj=o.cJS({providers:[xl,Rl]})}return n})(),Nl=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=o.oAB({type:n});static#n=this.\u0275inj=o.cJS({imports:[W.ez,Qo,Xo.m,co,O.u5]})}return n})()}}]);